<!doctype html><html lang=zh-cn class=no-js>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.91.2">
<link rel=canonical type=text/html href=https://xiaoping378.github.io/docs/2-infra/linux/>
<link rel=alternate type=application/rss+xml href=https://xiaoping378.github.io/docs/2-infra/linux/index.xml>
<meta name=robots content="noindex, nofollow">
<link rel="shortcut icon" href=/favicons/favicon.ico>
<title>linux基础 | 现代技能栈</title>
<meta name=description content="linux基础操作介绍
">
<meta property="og:title" content="linux基础">
<meta property="og:description" content="linux基础操作介绍
">
<meta property="og:type" content="website">
<meta property="og:url" content="https://xiaoping378.github.io/docs/2-infra/linux/"><meta property="og:site_name" content="现代技能栈">
<meta itemprop=name content="linux基础">
<meta itemprop=description content="linux基础操作介绍
"><meta name=twitter:card content="summary">
<meta name=twitter:title content="linux基础">
<meta name=twitter:description content="linux基础操作介绍
">
<link rel=preload href=/scss/main.min.9f63fcc1b5f091883eb4c0c66b7bddf337a299d08451443230a201303e53b01c.css as=style>
<link href=/scss/main.min.9f63fcc1b5f091883eb4c0c66b7bddf337a299d08451443230a201303e53b01c.css rel=stylesheet integrity>
<script src=/js/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
<script src=/js/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-217913492-1','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
</head>
<body class=td-section>
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class=navbar-brand href=/>
<span class=navbar-logo></span><span class="text-uppercase font-weight-bold">现代技能栈</span>
</a>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/about/><span>关于</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link active" href=/docs/><span class=active>文档</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/blog/><span>博客</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/community/><span>社区</span></a>
</li>
</ul>
</div>
<div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; 站内搜索…" aria-label=站内搜索… autocomplete=off data-offline-search-index-json-src=/offline-search-index.2e4493fb40bc730b36b40ccf0e74dcbd.json data-offline-search-base-href=/ data-offline-search-max-results=10>
</div>
</nav>
</header>
<div class="container-fluid td-outer">
<div class=td-main>
<div class="row flex-xl-nowrap">
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main>
<div class=td-content>
<div class="pageinfo pageinfo-primary d-print-none">
<p>
这是本节的多页打印视图。
<a href=# onclick="return print(),!1">点击此处打印</a>.
</p><p>
<a href=/docs/2-infra/linux/>返回本页常规视图</a>.
</p>
</div>
<h1 class=title>linux基础</h1>
<div class=lead>linux基础操作介绍</div>
<ul>
<li>1: <a href=#pg-5c09401150b54f4b74cb181c0c1da24b>Centos7 配置记录</a></li>
</ul>
<div class=content>
<div class="pageinfo pageinfo-primary">
<p>主要是本地环境搭建、日常使用技巧和linux性能方面的解读.</p>
</div>
</div>
</div>
<div class=td-content>
<h1 id=pg-5c09401150b54f4b74cb181c0c1da24b>1 - Centos7 配置记录</h1>
<div class=lead>记录centos7的日常操作记录</div>
<ul>
<li><strong>sshd</strong> 禁用DNS反向解析和GSSAPI认证，以完成快速登陆</li>
</ul>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo sed -i <span style=color:#b44>&#39;s/#UseDNS yes/UseDNS no/g&#39;</span> /etc/ssh/sshd_config
sudo sed -i <span style=color:#b44>&#39;s/GSSAPIAuthentication yes/GSSAPIAuthentication no/g&#39;</span> /etc/ssh/sshd_config
sudo systemctl restart sshd
</code></pre></div><ul>
<li><strong>添加本地dvd源</strong></li>
</ul>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mkdir -p /media/dvd <span style=color:#666>&amp;&amp;</span> mount -t auto /dev/cdrom /media/dvd

cat <span style=color:#b44>&lt;&lt;EOF &gt;/etc/yum.repos.d/CentOS-Base.repo
</span><span style=color:#b44>[c7-dvd]
</span><span style=color:#b44>name=Centos-7
</span><span style=color:#b44>baseurl=file:///media/dvd
</span><span style=color:#b44>enabled=1
</span><span style=color:#b44>gpgcheck=1
</span><span style=color:#b44>gpgkey=file:///media/dvd/RPM-GPG-KEY-CentOS-7
</span><span style=color:#b44>EOF</span>

yum clean all
</code></pre></div><ul>
<li>
<p><strong>安装docker</strong></p>
<ol>
<li>添加yum源</li>
</ol>
</li>
</ul>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo tee /etc/yum.repos.d/docker.repo <span style=color:#b44>&lt;&lt;-&#39;EOF&#39;
</span><span style=color:#b44>[dockerrepo]
</span><span style=color:#b44>name=Docker Repository
</span><span style=color:#b44>baseurl=https://yum.dockerproject.org/repo/main/centos/7/
</span><span style=color:#b44>enabled=1
</span><span style=color:#b44>gpgcheck=1
</span><span style=color:#b44>gpgkey=https://yum.dockerproject.org/gpg
</span><span style=color:#b44>EOF</span>
</code></pre></div><ol start=2>
<li>安装docker-engine</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo yum install -y docker
</code></pre></div><p>或者下载离线rpm包（供网络环境差的环境使用）</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>  sudo yum install docker --downloadonly --downloaddir<span style=color:#666>=</span>./
  sudo yum localinstall ./*.rpm
</code></pre></div><p><del>3. 修改必要的docker daemon配置参数</del> 现在不需要了，主要是devicemapper需要改下</p>
<pre tabindex=0><code>sudo mkdir /etc/systemd/system/docker.service.d
sudo cat &lt;&lt;EOF &gt;&gt;/etc/systemd/system/docker.service.d/docker.conf
[Service]
    ExecStart=
    ExecStart=/usr/bin/docker daemon -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock --dns 180.76.76.76  --insecure-registry registry.cecf.com -g /home/Docker/docker -s overlay --selinux-enabled=false
EOF
</code></pre><ol start=4>
<li>启动docker</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>  sudo systemctl <span style=color:#a2f>enable</span> docker
  sudo systemctl start docker
  <span style=color:#080;font-style:italic># 普通用户放进docker组里，快速CLI</span>
  sudo usermod -aG docker <span style=color:#666>[</span>your_username<span style=color:#666>]</span>
</code></pre></div><ul>
<li>
<p><strong>firewalld</strong></p>
<ul>
<li>目前docker与firewalld存在兼容性问题</li>
<li>先选择关闭firewalld吧</li>
</ul>
</li>
<li>
<p><strong>安装ntp</strong></p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>yum install -y ntp
systemctl start ntpd
systemctl <span style=color:#a2f>enable</span> ntpd
ntpdate -u cn.pool.ntp.org
</code></pre></div></li>
<li>
<p><strong>必要组件</strong></p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>yum install net-tools bind-utils tcpdump lsof
</code></pre></div></li>
<li>
<p><strong>查询本机的外网IP</strong></p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl ipinfo.io
</code></pre></div></li>
</ul>
</div>
</main>
</div>
</div>
<footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class=row>
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="个人邮箱 xiaoping378@163.com" aria-label="个人邮箱 xiaoping378@163.com">
<a class=text-white target=_blank rel=noopener href=mailto:xiaoping378@163.com aria-label="个人邮箱 xiaoping378@163.com">
<i class="fa fa-envelope"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=微博 aria-label=微博>
<a class=text-white target=_blank rel=noopener href=https://weibo.com/xiaoping378 aria-label=微博>
<i class="fab fa-weibo"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=知乎 aria-label=知乎>
<a class=text-white target=_blank rel=noopener href=https://www.zhihu.com/people/xiaoping378 aria-label=知乎>
<i class="fab fa-zhihu"></i>
</a>
</li>
</ul>
</div>
<div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub>
<a class=text-white target=_blank rel=noopener href=https://github.com/xiaoping378/xiaoping378.github.io aria-label=GitHub>
<i class="fab fa-github"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack>
<a class=text-white target=_blank rel=noopener href=https://example.org/slack aria-label=Slack>
<i class="fab fa-slack"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list">
<a class=text-white target=_blank rel=noopener href=https://example.org/mail aria-label="Developer mailing list">
<i class="fa fa-envelope"></i>
</a>
</li>
</ul>
</div>
<div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class=text-white>&copy; 2022 xiaoping378 保留所有权利</small>
<small class=ml-1><a href=# target=_blank rel=noopener>隐私政策</a></small>
</div>
</div>
</div>
</footer>
</div>
<script src=/js/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/js/deflate.js></script>
<script src=/js/main.min.e016890ed6b0c42f5af3410eb57ac626a192a868609aee68cefe1e0f84a50b13.js integrity="sha256-4BaJDtawxC9a80EOtXrGJqGSqGhgmu5ozv4eD4SlCxM=" crossorigin=anonymous></script>
</body>
</html>