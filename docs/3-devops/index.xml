<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Dev|Ops on 现代技能栈</title><link>https://xiaoping378.github.io/docs/3-devops/</link><description>Recent content in Dev|Ops on 现代技能栈</description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Thu, 27 Nov 2025 19:06:19 +0800</lastBuildDate><atom:link href="https://xiaoping378.github.io/docs/3-devops/index.xml" rel="self" type="application/rss+xml"/><item><title>机器学习的语言之争</title><link>https://xiaoping378.github.io/docs/3-devops/1-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%AF%AD%E8%A8%80%E4%B9%8B%E4%BA%89-python/</link><pubDate>Thu, 05 Jan 2017 00:00:00 +0000</pubDate><guid>https://xiaoping378.github.io/docs/3-devops/1-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%AF%AD%E8%A8%80%E4%B9%8B%E4%BA%89-python/</guid><description>&lt;p&gt;原文：&lt;a href="http://sebastianraschka.com/blog/2015/why-python.html"&gt;Python, Machine Learning, and Language Wars - A Highly Subjective Point of View&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;噢，天呀，那些主观有针对性的，自以为标题党的文章的另一个？是哒！为什么我还要不厌其烦的写下来呢？嗯，这里是来自于我的前教授的最琐碎但又改变生活的洞察和世俗的智慧之一，它已经成为了我的口头禅了：“如果你必须做这个任务超过三次以上，那么只要写一个脚本，然后对其自动化。”&lt;/p&gt;
&lt;p&gt;现在，你或许已经开始琢磨这个博客了。我已经超过半年没写什么东西了！好吧，&lt;a href="https://twitter.com/rasbt"&gt;沉迷在社交网络平台&lt;/a&gt;除外，那不是真的：我写了&lt;a href="https://github.com/rasbt/python-machine-learning-book"&gt;一些东西&lt;/a&gt; —— 准确来说，约400页。最近，对我来说，这真的已经是一次旅程了。而对于经常被问道的问题“为什么你选择Python来进行机器学习？”，我猜，是时候来写_我的脚本_了。&lt;/p&gt;
&lt;p&gt;在下面的段落中，我真的不打算告诉你为什么_你_或者其他人应该使用Python。老实说，我真心讨厌那类问题：“哪个&lt;em&gt;最好？”（这里，用“编程语言、文本编辑器、IDE、操作系统、计算机制造商”替换掉&lt;/em&gt;）。这实在是扯淡。虽然有时它挺有意思的，但是我建议你节省下关于这个问题的时间，用来在下班后跟朋友或者同事偶尔喝喝啤酒或咖啡。&lt;/p&gt;
&lt;h4 id="目录"&gt;目录&lt;a class="td-heading-self-link" href="#%e7%9b%ae%e5%bd%95" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;!-- MarkdownTOC --&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/1-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%AF%AD%E8%A8%80%E4%B9%8B%E4%BA%89-python/#%e5%af%b9%e4%ba%8e%e4%b8%80%e4%b8%aa%e5%a4%8d%e6%9d%82%e9%97%ae%e9%a2%98%e7%9a%84%e7%ae%80%e7%9f%ad%e5%9b%9e%e7%ad%94"&gt;对于一个复杂问题的简短回答&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/1-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%AF%AD%E8%A8%80%E4%B9%8B%E4%BA%89-python/#%e6%88%91%e6%9c%80%e5%96%9c%e6%ac%a2%e7%9a%84python%e5%b7%a5%e5%85%b7%e6%98%af%e4%bb%80%e4%b9%88"&gt;我最喜欢的Python工具是什么？&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/1-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%AF%AD%E8%A8%80%E4%B9%8B%E4%BA%89-python/#%e6%88%91%e5%af%b9matlab%e6%98%af%e6%80%8e%e4%b9%88%e7%9c%8b%e7%9a%84"&gt;我对MATLAB是怎么看的？&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/1-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%AF%AD%E8%A8%80%E4%B9%8B%E4%BA%89-python/#julia%e7%9c%9f%e6%a3%92%e7%90%86%e8%ae%ba%e4%b8%8a"&gt;Julia真棒……理论上！&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/1-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%AF%AD%E8%A8%80%E4%B9%8B%E4%BA%89-python/#r%e5%ae%9e%e5%9c%a8%e6%b2%a1%e5%95%a5%e9%94%99"&gt;R实在没啥错&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/1-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%AF%AD%E8%A8%80%E4%B9%8B%E4%BA%89-python/#perl%e5%8f%91%e7%94%9f%e4%ba%86%e4%bb%80%e4%b9%88"&gt;Perl发生了什么？&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/1-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%AF%AD%E8%A8%80%E4%B9%8B%E4%BA%89-python/#%e5%85%b6%e4%bb%96%e8%a7%82%e7%82%b9"&gt;其他观点&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/1-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%AF%AD%E8%A8%80%E4%B9%8B%E4%BA%89-python/#python%e6%98%af%e4%b8%80%e4%b8%aa%e6%ad%a3%e5%9c%a8%e6%ad%bb%e6%8e%89%e7%9a%84%e8%af%ad%e8%a8%80%e5%90%97"&gt;Python是一个正在死掉的语言吗？&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/1-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%AF%AD%E8%A8%80%E4%B9%8B%E4%BA%89-python/#%e6%80%bb%e7%bb%93"&gt;总结&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/1-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%AF%AD%E8%A8%80%E4%B9%8B%E4%BA%89-python/#%e5%8f%8d%e9%a6%88%e5%92%8c%e8%a7%82%e7%82%b9"&gt;反馈和观点&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/1-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%AF%AD%E8%A8%80%E4%B9%8B%E4%BA%89-python/#python"&gt;Python&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/1-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%AF%AD%E8%A8%80%E4%B9%8B%E4%BA%89-python/#perl"&gt;Perl&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/1-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%AF%AD%E8%A8%80%E4%B9%8B%E4%BA%89-python/#r"&gt;R&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/1-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%AF%AD%E8%A8%80%E4%B9%8B%E4%BA%89-python/#matlaboctave"&gt;MATLAB/Octave&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/1-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%AF%AD%E8%A8%80%E4%B9%8B%E4%BA%89-python/#julia"&gt;Julia&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/1-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%AF%AD%E8%A8%80%E4%B9%8B%E4%BA%89-python/#%e5%85%b6%e4%bb%96%e8%af%ad%e8%a8%80-%e6%88%91%e5%bf%98%e8%ae%b0%e6%8f%90%e7%9a%84%e9%82%a3%e4%ba%9b"&gt;其他语言 (我忘记提的那些)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- /MarkdownTOC --&gt;
&lt;h2 id="对于一个复杂问题的简短回答"&gt;对于一个复杂问题的简短回答&lt;a class="td-heading-self-link" href="#%e5%af%b9%e4%ba%8e%e4%b8%80%e4%b8%aa%e5%a4%8d%e6%9d%82%e9%97%ae%e9%a2%98%e7%9a%84%e7%ae%80%e7%9f%ad%e5%9b%9e%e7%ad%94" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;或许我应该从一个简短的回答开始。欢迎你停止阅读这段后面的文章，因为它真的解决掉这个问题了。我是一个科学家，我喜欢完成我的工作。我喜欢有一个环境，在那里我可以快速原型，并记下我的模型和想法。我需要解决非常特殊的问题。我分析给定的数据集以得出结论。这对我来说是最重要的：我怎样才能最多产的完成我的工作呢？“多产”这里意味着什么？好吧，我通常只进行一次分析 (不同的想法测试和调试除外); 我不需要重复地24/7地运行一段特定的代码，我并不是在为最终用户开发软件应用或web应用。当我_量化y_ “多产”时，我从字面上评估(1) 把想法以代码的形式写下来所花费的时间，(2) 调试的时间和 (3) 执行的时间之和。对我来说，“最多产”意味着“获得结果需要花费多少时间？” 现在，这么多年来，我发现，Python就是为我而生的。并非总是如此，但很多时候是这样。正如生活中的其他东西一样，Python并不是“银弹”，它并非总是每一个问题的“最佳”解决方案。然而，如果你跨常见和不那么常见的问题任务来比较编程语言的话，它已经非常接近（最佳解决方案）了；Python可能是最通用，最有能力的全才。&lt;/p&gt;
&lt;p&gt;&lt;img src="http://sebastianraschka.com/images/blog/2015/why-python/the_general_problem.png" alt=""&gt;&lt;/p&gt;
&lt;p&gt;(来源: &lt;a href="https://xkcd.com/974/"&gt;https://xkcd.com/974/&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;请记住：“过早的优化是一切罪恶的根源” (Donald Knuth)。如果你是那种想要从机器学习和数据科学划分中中优化下一个颠覆性高频交易模型的软件工程团队中的一员，那么Python可能不适合你 (但或许它是数据科学团队的语言选择，所以学习如何读懂它仍然有用)。因此，我的一个小小的忠告是，当你选择一门语言时，评估你每天的问题任务和需求。“如果你只有一把锤子，那么一切开始看起来都像一个钉子” – 你聪明得不会掉入这个陷阱！然而，记住，有一个平衡点。在有些场景下，即使螺丝刀可能是“更漂亮的”解决方法，锤子可能还是最好的选择。再次，这归结为生产力。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;让我从个人经历中挑个例子来说说。&lt;/strong&gt; 关于一个非常问题相关的假设，我需要开发一堆新颖的算法来“筛选”1千5百万个小的化合物。我完全是一个计算型人，但我和进行非计算性实验（我们称它们为“湿实验室”实验）的生物学家一起合作。目标是缩小它到一个包含100个潜在化合物的列表，这样他们可以在实验室里测试它们。提醒是，他们需要快速获得结果，因为他们仅有有限的实际来做实验。相信我，时间真的是“有限的”：在必须收集结果之前，我们刚让我们的补助金申请受理和研究得到资助 (我们的合作者对某种特定的只知春季产卵的幼虫做实验)。因此，我开始想“我要怎样尽可能快的把结果给他们？” 嗯，我懂C++和FORTRAN，如果我在各个语言中实现那些算法，那么与Python实现相比，执行“筛选”运行也许会更快些。这更多是一种有根据的猜测，我真的不知道实质上是否会更快。但有一件事我可以肯定：如果我开始用Python写代码，那么我可以让它在几天内运行 – 或许让对应的C++版本能够跑起来需要花一周的时间。以后，我会操心一个更有效的实现。在那一刻，重要的是，把那些结果拿给我的合作者 – “过早的优化是一切罪恶的根源。” 边注：相同的思路运用到数据存储解决方案。这里，我只是使用SQLite。CSV没有多大意义，因为我必须重复地注释和检索某些分子。我当然不想每次想要查看一个分子或者操作它的时候，都要全过程扫描或重写一个CSV – 在处理内存容量预留的问题。也许用MySQL会更好，但是出于上面提到的原因，我想快速地完成这项工作，并建立一个额外的SQL服务器……没时间做它了，用SQLite来完成这项工作挺好的。&lt;/p&gt;</description></item><item><title>监控之我见</title><link>https://xiaoping378.github.io/docs/3-devops/2-%E7%9B%91%E6%8E%A7%E4%B9%8B%E6%88%91%E8%A7%81/</link><pubDate>Wed, 04 Jan 2017 00:00:00 +0000</pubDate><guid>https://xiaoping378.github.io/docs/3-devops/2-%E7%9B%91%E6%8E%A7%E4%B9%8B%E6%88%91%E8%A7%81/</guid><description>&lt;!-- TOC depthFrom:1 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 --&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/2-%E7%9B%91%E6%8E%A7%E4%B9%8B%E6%88%91%E8%A7%81/#%e6%a6%82%e8%bf%b0"&gt;概述&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/2-%E7%9B%91%E6%8E%A7%E4%B9%8B%E6%88%91%E8%A7%81/#%e7%9b%91%e6%8e%a7%e7%9b%ae%e6%a0%87"&gt;监控目标&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/2-%E7%9B%91%E6%8E%A7%E4%B9%8B%E6%88%91%E8%A7%81/#%e7%9b%91%e6%8e%a7%e6%96%b9%e6%b3%95"&gt;监控方法&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/2-%E7%9B%91%E6%8E%A7%E4%B9%8B%E6%88%91%E8%A7%81/#%e7%9b%91%e6%8e%a7%e6%a0%b8%e5%bf%83"&gt;监控核心&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/2-%E7%9B%91%E6%8E%A7%E4%B9%8B%E6%88%91%E8%A7%81/#%e7%9b%91%e6%8e%a7%e6%b5%81%e7%a8%8b"&gt;监控流程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/2-%E7%9B%91%E6%8E%A7%E4%B9%8B%E6%88%91%E8%A7%81/#%e7%9b%91%e6%8e%a7%e6%8c%87%e6%a0%87"&gt;监控指标&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/2-%E7%9B%91%E6%8E%A7%E4%B9%8B%E6%88%91%E8%A7%81/#%e7%a1%ac%e4%bb%b6%e7%9b%91%e6%8e%a7"&gt;硬件监控&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/2-%E7%9B%91%E6%8E%A7%E4%B9%8B%E6%88%91%E8%A7%81/#%e7%b3%bb%e7%bb%9f%e7%9b%91%e6%8e%a7"&gt;系统监控&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/2-%E7%9B%91%E6%8E%A7%E4%B9%8B%E6%88%91%E8%A7%81/#%e5%ba%94%e7%94%a8%e7%9b%91%e6%8e%a7"&gt;应用监控&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/2-%E7%9B%91%E6%8E%A7%E4%B9%8B%E6%88%91%E8%A7%81/#%e7%bd%91%e7%bb%9c%e7%9b%91%e6%8e%a7"&gt;网络监控&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/2-%E7%9B%91%E6%8E%A7%E4%B9%8B%E6%88%91%E8%A7%81/#%e6%b5%81%e9%87%8f%e5%88%86%e6%9e%90"&gt;流量分析&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/2-%E7%9B%91%E6%8E%A7%E4%B9%8B%E6%88%91%E8%A7%81/#%e6%97%a5%e5%bf%97%e7%9b%91%e6%8e%a7"&gt;日志监控&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/2-%E7%9B%91%E6%8E%A7%E4%B9%8B%E6%88%91%E8%A7%81/#%e5%ae%89%e5%85%a8%e7%9b%91%e6%8e%a7"&gt;安全监控&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/2-%E7%9B%91%E6%8E%A7%E4%B9%8B%E6%88%91%E8%A7%81/#api%e7%9b%91%e6%8e%a7"&gt;API监控&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/2-%E7%9B%91%E6%8E%A7%E4%B9%8B%E6%88%91%E8%A7%81/#%e6%80%a7%e8%83%bd%e7%9b%91%e6%8e%a7"&gt;性能监控&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/2-%E7%9B%91%E6%8E%A7%E4%B9%8B%E6%88%91%E8%A7%81/#%e4%b8%9a%e5%8a%a1%e7%9b%91%e6%8e%a7"&gt;业务监控&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/2-%E7%9B%91%E6%8E%A7%E4%B9%8B%E6%88%91%E8%A7%81/#%e7%9b%91%e6%8e%a7%e6%8a%a5%e8%ad%a6"&gt;监控报警&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/2-%E7%9B%91%E6%8E%A7%E4%B9%8B%E6%88%91%E8%A7%81/#%e6%8a%a5%e8%ad%a6%e5%a4%84%e7%90%86"&gt;报警处理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://xiaoping378.github.io/docs/3-devops/2-%E7%9B%91%E6%8E%A7%E4%B9%8B%E6%88%91%E8%A7%81/#%e6%80%bb%e7%bb%93"&gt;总结&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- /TOC --&gt;
&lt;h2 id="概述"&gt;概述&lt;a class="td-heading-self-link" href="#%e6%a6%82%e8%bf%b0" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;监控是整个运维乃至整个产品生命周期中非常重要的一环，可以事前及时预警发现故障，事后提供详实的数据用于追查定位问题。&lt;/p&gt;
&lt;p&gt;目前业界存在各种开源监控产品，如Zabbix，ELK体系，Prometheus等等，各有自身的适用场景，所以选择基于一款开源的的监控系统会是事半功倍的事情。&lt;/p&gt;
&lt;h2 id="监控目标"&gt;监控目标&lt;a class="td-heading-self-link" href="#%e7%9b%91%e6%8e%a7%e7%9b%ae%e6%a0%87" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;站在公司各业务角度考虑，整理如下四点目标：&lt;/p&gt;
&lt;p&gt;&lt;img src="https://xiaoping378.github.io/%E7%9B%91%E6%8E%A7%E7%9B%AE%E6%A0%87.jpeg" alt=""&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;对系统不间断实时监控&lt;/strong&gt;: 实际上是对系统不间断的实时监控(这就是监控)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;实时反馈系统当前状态&lt;/strong&gt;: 我们监控某个硬件、某个系统，某个进程服务,都是需要能实时看到当前系统的状态，是正常、异常、或者故障&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;保证服务可靠性安全性&lt;/strong&gt;：我们监控的目的就是要保证系统、服务、业务正常运行&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;保证业务持续稳定运行&lt;/strong&gt;：如果我们的监控做得很完善，即使出现故障，能第一时间接收到故障报警，在第一时间处理解决，从而保证业务持续性的稳定运行；&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="监控方法"&gt;监控方法&lt;a class="td-heading-self-link" href="#%e7%9b%91%e6%8e%a7%e6%96%b9%e6%b3%95" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;既然我们了解到了监控的重要性、以及监控的目的，那么下面我们需要了解下监控有哪些方法。&lt;/p&gt;
&lt;p&gt;&lt;img src="https://xiaoping378.github.io/%E7%9B%91%E6%8E%A7%E6%96%B9%E6%B3%95.jpeg" alt=""&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;了解监控对象&lt;/strong&gt;：我们要监控的对象你是否了解呢？比如 CPU 到底是如何工作的？&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;性能基准指标&lt;/strong&gt;：我们要监控这个东西的什么属性？比如 CPU 的使用率、负载、用户态、内核态、上下文切换。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;报警阈值定义&lt;/strong&gt;：怎么样才算是故障，要报警呢？比如 CPU 的负载到底多少算高，用户态、内核态分别跑多少算高？&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;故障处理流程&lt;/strong&gt;：收到了故障报警，我们怎么处理呢？有什么更高效的处理流程吗？&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="监控核心"&gt;监控核心&lt;a class="td-heading-self-link" href="#%e7%9b%91%e6%8e%a7%e6%a0%b8%e5%bf%83" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;我们了解了监控的方法、监控对象、性能指标、报警阈值定义、以及故障处理流程几步骤，当然我们更需要知道监控的核心是什么？&lt;/p&gt;
&lt;p&gt;&lt;img src="https://xiaoping378.github.io/%E7%9B%91%E6%8E%A7%E6%A0%B8%E5%BF%83.png" alt=""&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;发现问题&lt;/strong&gt;：当系统发生故障报警，我们会收到故障报警的信息 ；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;定位问题&lt;/strong&gt;：故障邮件一般都会写某某主机故障、具体故障的内容，我们需要对报警内容进行分析，比如一台服务器连不上：我们就需要考虑是网络问题、还是负载太高导致长时间无法连接，又或者某开发触发了防火墙禁止的相关策略等等，我们就需要去分析故障具体原因；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;解决问题&lt;/strong&gt;：当然我们了解到故障的原因后，就需要通过故障解决的优先级去解决该故障；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;总结问题&lt;/strong&gt;：当我们解决完重大故障后，需要对故障原因以及防范进行总结归纳，避免以后重复出现；&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="监控流程"&gt;监控流程&lt;a class="td-heading-self-link" href="#%e7%9b%91%e6%8e%a7%e6%b5%81%e7%a8%8b" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;基于 Zabbix 来构建整个监控体系生态圈&lt;/p&gt;</description></item><item><title>Github开源项目的正确贡献姿势</title><link>https://xiaoping378.github.io/docs/3-devops/3-github-dev/</link><pubDate>Wed, 04 Jan 2017 00:00:00 +0000</pubDate><guid>https://xiaoping378.github.io/docs/3-devops/3-github-dev/</guid><description>&lt;p&gt;常见的开源项目贡献指导里都是差不多的样子：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;* 要先fork
* 然后change something
* 再然后fetch，rebase
* push origin， 最后发起pull request
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;具体到不同的项目，可能会要求更多的细节步骤,但大体如上。&lt;/p&gt;
&lt;p&gt;这些都没错，但实际操作起来，和习惯不符。因为我一般是先clone一个项目，然后使用中发现有问题，会尝试去修改，fix OK的话，才会想着去贡献代码
可事情到了这一步，再按照一开始的方式操作，会平白无辜耗费很多时间，还涉及到已经修改完代码如何同步过去的问题。
以下是我个人总结的一套方法，屡试不爽乎。&lt;/p&gt;
&lt;p&gt;这里我以k8s项目的贡献经历来举例，以备不时之需。git这个东西，不常用，会忘记的，即使你已经理解原理了。。。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;首先clone K8s的项目代码。&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;git clone https://github.com/kubernetes/kubernetes.git
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;然后自行编译 &lt;strong&gt;make&lt;/strong&gt;, 使用中发现一些问题&lt;/p&gt;
&lt;p&gt;就会去github的issue里找找看。。。竟然没人提这个问题，问问同事或同行，人家表示没碰到过你的问题，
好吧，自己尝试去修改... 不断编译 ... 测试... 最终OK了，我要贡献代码！！！
完啦，没有按照最佳习惯来，改动前忘记新建分支了。。。（这个习惯很重要，可以省掉很多麻烦）
只能如此操作了，可以来个大挪移到新建分支上&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;git stash
git checkout -b fix_something
git stash apply
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;此时去github上fork下原项目，拿到fork后的项目地址，再来个偷天换日。&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;git remote rename origin upstream
git remote add origin git@github.com:xiaoping378/kubernetes.git
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;再然后就可以按一开始介绍的，fetch, rebase, push origin, 发起PR了。&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;git fetch upstream
git rebase upstream/master
# 有冲突就git mergetool
git push origin fix_something 
# 然后去github页面发起pull request即可。
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;注意事项
值的注意的是，以后在master分支上&lt;strong&gt;git pull&lt;/strong&gt;，就是从upstream/master那里拉取的，和一般情况不一样的地方。
这样会少了烦人的merge msg（-ff可以解决）， 还可以用简单的pull来同步上游代码。
更可以意淫自己是原项目的核心开发人员了。。。
以后本地同步fork的项目到上游的最新状态，这样操作：&lt;/p&gt;</description></item><item><title>Golang开发-glog日志库</title><link>https://xiaoping378.github.io/docs/3-devops/4-golang%E5%BC%80%E5%8F%91-%E6%97%A5%E5%BF%97%E7%AF%87/</link><pubDate>Wed, 04 Jan 2017 00:00:00 +0000</pubDate><guid>https://xiaoping378.github.io/docs/3-devops/4-golang%E5%BC%80%E5%8F%91-%E6%97%A5%E5%BF%97%E7%AF%87/</guid><description>&lt;p&gt;基于Golang 1.7.5版本&lt;/p&gt;
&lt;p&gt;软件项目里的日志输出是很重要的环节，可以用于日后BI分析，或者线上调试（万能调试大法printf）等等。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;对于当年刚入软件行业时，自己的printf(&amp;quot;11111\n&amp;quot;)的做法，记忆犹新呀，调试完再删掉自己胡乱加的打印语句，偶尔还有漏删的情况，就commit，push上去了。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;golang语言里有个&lt;code&gt;golang/glog&lt;/code&gt;包，是类似google内部&lt;a href="https://github.com/google/glog"&gt;glog&lt;/a&gt;的开源实现，其可以做到无侵入式调试程序，主要是通过启动时命令行传参来控制打印级别。&lt;/p&gt;
&lt;p&gt;有以下特性，&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;有四个级别的打印 Info, Warning, Error, Fatal，级别越来越高，分别都支持格式化输出Infof, Warningf, Errorf, Fatalf&lt;/li&gt;
&lt;li&gt;支持 -v传参，指定打印级别&lt;/li&gt;
&lt;li&gt;支持 -vmodule=file=2， 指定特殊文件开启打印，避免日志输出过多。&lt;/li&gt;
&lt;li&gt;支持 -log_dir=&amp;quot;&amp;quot;, 指定日志输出目录， 默认会按级别输出/tmp目录下， 高级别的会记录到低级别里日志文件里&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;下面举个简单的例子&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-go" data-lang="go"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080"&gt;//file name: glog.go&lt;/span&gt;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt;&lt;/span&gt;&lt;span style="color:#a2f;font-weight:bold"&gt;package&lt;/span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;main&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt;&lt;/span&gt;&lt;span style="color:#a2f;font-weight:bold"&gt;import&lt;/span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;(&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt;	&lt;/span&gt;&lt;span style="color:#b44"&gt;&amp;#34;flag&amp;#34;&lt;/span&gt;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt;	&lt;/span&gt;&lt;span style="color:#b44"&gt;&amp;#34;github.com/golang/glog&amp;#34;&lt;/span&gt;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt;&lt;/span&gt;)&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt;&lt;/span&gt;&lt;span style="color:#a2f;font-weight:bold"&gt;func&lt;/span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;&lt;span style="color:#00a000"&gt;main&lt;/span&gt;()&lt;span style="color:#bbb"&gt; &lt;/span&gt;{&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt;	&lt;/span&gt;flag.&lt;span style="color:#00a000"&gt;Parse&lt;/span&gt;()&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt;	&lt;/span&gt;&lt;span style="color:#080"&gt;//flag.Set(&amp;#34;logtostderr&amp;#34;, &amp;#34;true&amp;#34;)&lt;/span&gt;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt;	&lt;/span&gt;&lt;span style="color:#a2f;font-weight:bold"&gt;defer&lt;/span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;glog.&lt;span style="color:#00a000"&gt;Flush&lt;/span&gt;()&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt;	&lt;/span&gt;glog.&lt;span style="color:#00a000"&gt;Info&lt;/span&gt;(&lt;span style="color:#b44"&gt;&amp;#34;这里是Info级别的日志&amp;#34;&lt;/span&gt;)&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt;	&lt;/span&gt;glog.&lt;span style="color:#00a000"&gt;Warning&lt;/span&gt;(&lt;span style="color:#b44"&gt;&amp;#34;这里是Warning级别的日志&amp;#34;&lt;/span&gt;)&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt;	&lt;/span&gt;glog.&lt;span style="color:#00a000"&gt;Errorf&lt;/span&gt;(&lt;span style="color:#b44"&gt;&amp;#34;这里是Error级别的日志: %s&amp;#34;&lt;/span&gt;,&lt;span style="color:#bbb"&gt; &lt;/span&gt;&lt;span style="color:#b44"&gt;&amp;#34;error&amp;#34;&lt;/span&gt;)&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt;	&lt;/span&gt;glog.&lt;span style="color:#00a000"&gt;V&lt;/span&gt;(&lt;span style="color:#666"&gt;3&lt;/span&gt;).&lt;span style="color:#00a000"&gt;Infoln&lt;/span&gt;(&lt;span style="color:#b44"&gt;&amp;#34;级别3的日志&amp;#34;&lt;/span&gt;)&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt;&lt;/span&gt;}&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;代码如上运行，你需要执行&lt;code&gt;go get github.com/golang/glog&lt;/code&gt;下载依赖包， 然后运行&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;➜ go run glog.go -v 3
E0408 09:35:38.703186 8663 glog.go:15] This is a Error log error
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Error级别的会输出到标准输出，并记录到文件，&lt;/p&gt;</description></item><item><title>VSCode-开发已有的java项目</title><link>https://xiaoping378.github.io/docs/3-devops/5-java-in-vscode/</link><pubDate>Wed, 04 Jan 2017 00:00:00 +0000</pubDate><guid>https://xiaoping378.github.io/docs/3-devops/5-java-in-vscode/</guid><description>&lt;p&gt;个人经验记录：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;install deps&lt;/p&gt;
&lt;p&gt;&lt;img src="https://xiaoping378.github.io/vscode-java.png" alt=""&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;clean workspace&lt;/p&gt;
&lt;p&gt;代开设置 Ctrl+Shift+P, 输入 &lt;code&gt;clean java workspace&lt;/code&gt; and restart&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;support lombok&lt;/p&gt;
&lt;p&gt;java代码出了名的冗长，lombok可以优雅解决此类问题，如果项目依赖了lombok， vsocde打开java项目就会显示各种&lt;code&gt;cannot be resloved&lt;/code&gt;错误,&lt;/p&gt;
&lt;p&gt;下面是我个人的配置,其中&lt;code&gt;java.jdt.ls.vmargs&lt;/code&gt;的配置（看个人项目maven依赖和安装路径了），会消除错误，并可以支持跳转：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#008000;font-weight:bold"&gt;&amp;#34;window.menuBarVisibility&amp;#34;&lt;/span&gt;: &lt;span style="color:#b44"&gt;&amp;#34;toggle&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#008000;font-weight:bold"&gt;&amp;#34;window.zoomLevel&amp;#34;&lt;/span&gt;: &lt;span style="color:#666"&gt;1&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#008000;font-weight:bold"&gt;&amp;#34;explorer.confirmDelete&amp;#34;&lt;/span&gt;: &lt;span style="color:#a2f;font-weight:bold"&gt;false&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#008000;font-weight:bold"&gt;&amp;#34;workbench.colorTheme&amp;#34;&lt;/span&gt;: &lt;span style="color:#b44"&gt;&amp;#34;Solarized Dark&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#008000;font-weight:bold"&gt;&amp;#34;files.associations&amp;#34;&lt;/span&gt;: {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#008000;font-weight:bold"&gt;&amp;#34;default&amp;#34;&lt;/span&gt;: &lt;span style="color:#b44"&gt;&amp;#34;toml&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; },
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#008000;font-weight:bold"&gt;&amp;#34;editor.fontLigatures&amp;#34;&lt;/span&gt;: &lt;span style="color:#a2f;font-weight:bold"&gt;true&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#008000;font-weight:bold"&gt;&amp;#34;java.configuration.checkProjectSettingsExclusions&amp;#34;&lt;/span&gt;: &lt;span style="color:#a2f;font-weight:bold"&gt;false&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#008000;font-weight:bold"&gt;&amp;#34;go.autocompleteUnimportedPackages&amp;#34;&lt;/span&gt;: &lt;span style="color:#a2f;font-weight:bold"&gt;true&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#008000;font-weight:bold"&gt;&amp;#34;java.jdt.ls.vmargs&amp;#34;&lt;/span&gt;:&lt;span style="color:#b44"&gt;&amp;#34;-javaagent:/home/xxp/.m2/repository/./org/projectlombok/lombok/1.16.20/lombok-1.16.20.jar -Xbootclasspath/a:/home/xxp/.m2/repository/./org/projectlombok/lombok/1.16.20/lombok-1.16.20.jar&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;参考链接&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/redhat-developer/vscode-java/wiki/Lombok-support"&gt;https://github.com/redhat-developer/vscode-java/wiki/Lombok-support&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://code.visualstudio.com/docs/languages/java"&gt;https://code.visualstudio.com/docs/languages/java&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/redhat-developer/vscode-java/wiki/Troubleshooting"&gt;https://github.com/redhat-developer/vscode-java/wiki/Troubleshooting&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>MongoDB之初见</title><link>https://xiaoping378.github.io/docs/3-devops/6-mogodb-0/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://xiaoping378.github.io/docs/3-devops/6-mogodb-0/</guid><description>&lt;ol&gt;
&lt;li&gt;手动启动&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;# 下载二进制&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.4.9.tgz
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tar -zxvf mongodb-linux-x86_64-3.4.9.tgz
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ln -s &lt;span style="color:#b8860b"&gt;$PWD&lt;/span&gt;/mongodb-linux-x86_64-3.4.9/bin/* /home/xxp/Software/bin
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;# 创建数据存储目录	&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mkdir mongodb
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo chown -R &lt;span style="color:#b8860b"&gt;$USER&lt;/span&gt; ./mongodb
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mongod -dbpath&lt;span style="color:#666"&gt;=&lt;/span&gt;&lt;span style="color:#b8860b"&gt;$PWD&lt;/span&gt;/mongodb
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;默认监听27017， 根据情况选择关闭warning。&lt;/p&gt;
&lt;ol start="2"&gt;
&lt;li&gt;推荐调试方法&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;默认可以使用&lt;code&gt;mongo&lt;/code&gt;进入shell交互模式，
亦可使用图形管理界面，推荐&lt;code&gt;robo3T&lt;/code&gt;, 目前1.1.1版本在ubuntu桌面上有crash问题，需要如下操作：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -O https://download.robomongo.org/1.1.1/linux/robo3t-1.1.1-linux-x86_64-c93c6b0.tar.gz
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tar zxvf robo3t-1.1.1-linux-x86_64-c93c6b0.tar.gz
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mkdir ~/robo-backup
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mv robo3t-1.1.1-linux-x86_64-c93c6b0/lib/libstdc++* ~/robo-backup/
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;robo3t-1.1.1-linux-x86_64-c93c6b0/bin/robo3t
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src="https://xiaoping378.github.io/robo3t.png" alt=""&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;基本使用&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;shell里敲mongo进入交互界面，&lt;/p&gt;
&lt;p&gt;手续推荐查看&lt;a href="http://www.mongoing.com/docs/reference/sql-comparison.html"&gt;mongodb中文文档&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Openldap之拨云见日</title><link>https://xiaoping378.github.io/docs/3-devops/7-openldap%E4%B9%8B%E6%8B%A8%E4%BA%91%E5%8E%BB%E6%97%A5/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://xiaoping378.github.io/docs/3-devops/7-openldap%E4%B9%8B%E6%8B%A8%E4%BA%91%E5%8E%BB%E6%97%A5/</guid><description>&lt;p&gt;很早就听说LDAP/AD之流的企业级概念，认为是做统一用户认证的，具体怎么使用对接，一直有点儿糊涂，今天决定搞明白这些，并深入实践下openldap。&lt;/p&gt;
&lt;p&gt;未完...TODO&lt;/p&gt;</description></item><item><title>Casbin的权限管理解读</title><link>https://xiaoping378.github.io/docs/3-devops/8-casbin/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://xiaoping378.github.io/docs/3-devops/8-casbin/</guid><description>&lt;div class="pageinfo pageinfo-primary"&gt;
&lt;p&gt;项目一般都要包含权限管理功能，或集成IAM，或自身实现。本文介绍一个强大、高效的开源访问控制框架--Casbin。&lt;/p&gt;

&lt;/div&gt;

&lt;h2 id="基本介绍"&gt;基本介绍&lt;a class="td-heading-self-link" href="#%e5%9f%ba%e6%9c%ac%e4%bb%8b%e7%bb%8d" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Casbin的由来，是出自开源作者&lt;code&gt;罗杨&lt;/code&gt;的一篇论文&lt;a href="https://arxiv.org/abs/1903.09756"&gt;《PML：一种基于Interpreter的Web服务访问控制策略语言》&lt;/a&gt;，该论文的主要摘要如下：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;为了保护云资源的安全,防止数据泄露和非授权访问,必须对云平台的资源访问实施访问控制.然而,目前主流云平台通常采用自己的安全策略语言和访问控制机制,从而造成两个问题:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;（1）云用户若要使用多个云平台,则需要学习不同的策略语言,分别编写安全策略;&lt;/li&gt;
&lt;li&gt;（2）云服务提供商需要自行设计符合自己平台的安全策略语言及访问控制机制,开发成本较高.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;对此,提出一种基于元模型的访问控制策略描述语言PML及其实施机制PML-EM. PML支持表达BLP、RBAC、ABAC等访问控制模型.
PML-EM实现了3个性质:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;策略语言无关性&lt;/li&gt;
&lt;li&gt;访问控制模型无关性&lt;/li&gt;
&lt;li&gt;程序设计语言无关性&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;从而降低了用户编写策略的成本与云服务提供商开发访问控制机制的成本. 在OpenStack云平台上实现了PML-EM机制.实验结果表明,PML策略支持从其他策略进行自动转换,
在表达云中多租户场景时具有优势.性能方面,与OpenStack原有策略相比,PML策略的评估开销为4.8%.PML-EM机制的侵入性较小,与云平台原有代码相比增加约0.42%.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;目前Casbin的权限策略管理支持主流的&lt;strong&gt;ACL、RBAC、ABAC&lt;/strong&gt;、RESTful等模型，实现的编程语言主要有Go、java、Nodejs、PHP、Python、.Net、C++、Rust等。目前Go和Java的实现最为全面。&lt;/p&gt;
&lt;p&gt;先介绍下主流的访问控制模型：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;ACL（access control list）&lt;/em&gt;：是一种与访问对象关联的权限列表，在基础设施领域应用非常广泛：
&lt;ul&gt;
&lt;li&gt;文件系统：用户（组）对文件或进程等的访问权限控制&lt;/li&gt;
&lt;li&gt;网络：常见的有防火墙（安全组、路由器、交换机）内的对目的IP和端口的规则控制&lt;/li&gt;
&lt;li&gt;SQL：库、表的权限管理&lt;/li&gt;
&lt;li&gt;&lt;a href="../openldap%E4%B9%8B%E6%8B%A8%E4%BA%91%E5%8E%BB%E6%97%A5"&gt;LDAP&lt;/a&gt;：层级结构的实体权限管理：网络域权限管理...&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;em&gt;RBAC（role-based access control）&lt;/em&gt;：基于角色的权限控制，围绕角色和权限定义的策略中立的访问控制机制，和组ACL等价，具体表现为在用户和权限之间加了一层角色，先建立具有某种权限的角色，然后用角色和用户绑定，目前多用于管控类业务系统的权限管理，还支持支持角色权限继承。&lt;/li&gt;
&lt;li&gt;&lt;em&gt;ABAC（Attribute-based access control）&lt;/em&gt;：基于属性的权限控制，属性可以是用户侧（所属组织、访问IP、访问时间）或资源侧（帖子的评论开关、留言再编辑）的，因为用户或资源的属性是动态的，不像前面两个(需要预先定义好策略，略显死板,,,）被称为是“下一代”的权限模型，可以实现更多元化的策略策略，比如
&lt;ul&gt;
&lt;li&gt;限制用户在什么固定时间段才可以编辑自己的帖子&lt;/li&gt;
&lt;li&gt;用户只能修改自己项目下的某些资源等&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;和Casbin结合，使用的基本示意图如下：&lt;/p&gt;
&lt;p&gt;&lt;img src="https://xiaoping378.github.io/images/Casbin-%E4%BD%BF%E7%94%A8%E7%A4%BA%E6%84%8F%E5%9B%BE.drawio.png" alt=""&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1-2为管理人员下发权限策略&lt;/li&gt;
&lt;li&gt;3-6为用户日常操作资源的简易流程，实际应用场景一般如下：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-plantuml" data-lang="plantuml"&gt;@startuml
!theme aws-orange
用户 -&amp;gt; 认证中心: 登录操作
认证中心 -&amp;gt; 缓存: 存放(key=token+ip,value=token)token
用户 &amp;lt;- 认证中心 : 认证成功返回token
用户 -&amp;gt; 认证中心: 下次访问头部携带token认证
认证中心 &amp;lt;- 缓存: key=token+ip获取token
Casbin &amp;lt;- 认证中心: 存在且校验成功,则进入授权校验
Casbin -&amp;gt; 其他服务: 权限合规，则跳转到用户请求的其他服务
其他服务 -&amp;gt; 用户: 信息
@enduml
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="抽象模型"&gt;抽象模型&lt;a class="td-heading-self-link" href="#%e6%8a%bd%e8%b1%a1%e6%a8%a1%e5%9e%8b" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;正如上面提到的，要支持这么多的权限模型，，所以Casbin基于开头提到的PML（PERM modeling language）引入一种抽象的元模型控制，其中&lt;strong&gt;PERM&lt;/strong&gt;是指的&lt;strong&gt;Policy, Effect, Request, Matchers&lt;/strong&gt;，具体工作流如下：&lt;/p&gt;</description></item><item><title>Windows Terminal终端入坑指南</title><link>https://xiaoping378.github.io/docs/3-devops/9-windows-terminal/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://xiaoping378.github.io/docs/3-devops/9-windows-terminal/</guid><description>&lt;div class="pageinfo pageinfo-primary"&gt;
&lt;p&gt;为了这个东西，重新安装了系统，目前是在windows LTSC 2021版本下的使用指南。
在IT界Terminal和Console差不多是一个意思，同属于界面层面的，不少人老和Shell搞混了，特此说明下Shell一般是指的Bash、zsh、PowerShell、cmd等。&lt;/p&gt;

&lt;/div&gt;

&lt;h2 id="安装"&gt;安装&lt;a class="td-heading-self-link" href="#%e5%ae%89%e8%a3%85" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;为了使用Windows Terminal，在春节期间，重新安装了LTSC 2021版本的系统（之前一直用的LTSC 2019）。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;它对操作系统内部版本的最低要求为 &lt;code&gt;18362.0&lt;/code&gt;，通过&lt;code&gt;Win+R&lt;/code&gt;输入&lt;code&gt;winver&lt;/code&gt;可以确认本机系统是否支持。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;目前有三种办法安装（本人选用的第二种）:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;是在应用商店中搜索&lt;code&gt;Windows Terminal&lt;/code&gt;，安装即可。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;通过&lt;a href="https://github.com/microsoft/terminal/releases"&gt;Github release&lt;/a&gt;页面下载安装包，&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-powershell" data-lang="powershell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a2f"&gt;Add-AppxPackage&lt;/span&gt; Microsoft.WindowsTerminal_&amp;lt;versionNumber&amp;gt;.msixbundle
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;通过命令行&lt;a href="https://github.com/microsoft/winget-cli"&gt;winget&lt;/a&gt;、&lt;a href="https://chocolatey.org/"&gt;Chocolatey &lt;/a&gt;、&lt;a href="https://scoop.sh/"&gt;Scoop &lt;/a&gt;安装，下面以winget为例：&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-powershell" data-lang="powershell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;winget install --id=Microsoft.WindowsTerminal -e
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="配置"&gt;配置&lt;a class="td-heading-self-link" href="#%e9%85%8d%e7%bd%ae" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;现在基本可以图形界面配置了，按照自己的习惯图形操作即可，网上一坨坨的教程，此处不表。&lt;/p&gt;
&lt;p&gt;&lt;img src="https://xiaoping378.github.io/images/windows-terminal-2022-01-30-12-53-50.png" alt=""&gt;&lt;/p&gt;
&lt;p&gt;默认配置保存在了&lt;code&gt;%LOCALAPPDATA%\Packages\Microsoft.WindowsTerminal_8wekyb3d8bbwe\LocalState\settings.json&lt;/code&gt;&lt;/p&gt;
&lt;h2 id="技巧"&gt;技巧&lt;a class="td-heading-self-link" href="#%e6%8a%80%e5%b7%a7" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;快捷键
&lt;ul&gt;
&lt;li&gt;新建终端 -- &lt;code&gt;Ctrl+Shift+t&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;切换终端 -- &lt;code&gt;Alt + Num&lt;/code&gt; , （我这里修改过了）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Quake窗口
&lt;ul&gt;
&lt;li&gt;快捷键是&lt;strong&gt;Win + `&lt;/strong&gt; , 可以快速从屏幕上半区换出终端窗口&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="gitbash"&gt;GitBash&lt;a class="td-heading-self-link" href="#gitbash" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;img src="https://xiaoping378.github.io/images/windows-terminal-2022-01-30-23-03-08.png" alt=""&gt;&lt;/p&gt;
&lt;p&gt;本人环境&lt;code&gt;VSCode&lt;/code&gt;和&lt;a href="https://git-scm.com/download/win"&gt;git-bash&lt;/a&gt;都是绿色版本了，免去了每次重装系统，都进行各种重复的配置操作.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;没有环境的可以自行通过上面的连接下载GitBash，后面有时间会尝试下&lt;code&gt;WSL&lt;/code&gt;和WSL2。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="中文乱码"&gt;中文乱码&lt;a class="td-heading-self-link" href="#%e4%b8%ad%e6%96%87%e4%b9%b1%e7%a0%81" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;需要添加环境变量到&lt;code&gt;~/.bashrc&lt;/code&gt;或者&lt;code&gt;~/.zshrc&lt;/code&gt;中。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a2f"&gt;export&lt;/span&gt; &lt;span style="color:#b8860b"&gt;LANG&lt;/span&gt;&lt;span style="color:#666"&gt;=&lt;/span&gt;zh_CN.UTF-8
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="绿色改造"&gt;绿色改造&lt;a class="td-heading-self-link" href="#%e7%bb%bf%e8%89%b2%e6%94%b9%e9%80%a0" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;绿色改造的核心，一个是安装时不默认安装在C盘，另一个就是设置&lt;code&gt;HOME&lt;/code&gt;的系统环境变量，Git-Bash每次启动是可以根据&lt;code&gt;HOME&lt;/code&gt;变量，决定加载配置的路径的。&lt;/p&gt;</description></item><item><title>Golang单仓monorepo协作的设计与实践</title><link>https://xiaoping378.github.io/docs/3-devops/10-golang-monorepo/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://xiaoping378.github.io/docs/3-devops/10-golang-monorepo/</guid><description>&lt;h2 id="什么是monorepo"&gt;什么是monorepo&lt;a class="td-heading-self-link" href="#%e4%bb%80%e4%b9%88%e6%98%afmonorepo" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;多代码仓合一就是nomorepo，目前在前端领域比较火热，国外大厂如Google、Facebook、Microsoft内也在公司级采用此模式，国内的浮躁，是个项目就上微服务架构的现状，导致代码仓动辄就上几十个，感觉也适合此模式。这东西说起来简单，实际运转起来，需要相应的支撑工具，如代码仓管理、CI/CD适配等，本文主要设计一套可行的方案及记录实践关键过程。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;这里说下背景：为什么要研究这个，最近接手一个项目，发现团队积累几乎没有、需求响应进度慢、新成员接手难度大，另外该项目竟然有上百个仓库，哪些和线上正在运行的服务对应，也没有说明，，，相应的协作管理手段也薄弱，总之就是乱，。个人是信服&lt;code&gt;康威定律&lt;/code&gt;（组织沟通方式会通过系统设计表达出来，反之亦成立）的，所以打算尝试下单仓的协作模式，一来可以梳理下以前的需求实现，二来促进组员交流沟通，制定些开发规范和统一框架之类的也好落地。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="代码目录结构"&gt;代码目录结构&lt;a class="td-heading-self-link" href="#%e4%bb%a3%e7%a0%81%e7%9b%ae%e5%bd%95%e7%bb%93%e6%9e%84" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;h2 id="codeowners机制"&gt;CODEOWNERS机制&lt;a class="td-heading-self-link" href="#codeowners%e6%9c%ba%e5%88%b6" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;h2 id="ci-cd机制"&gt;CI/CD机制&lt;a class="td-heading-self-link" href="#ci-cd%e6%9c%ba%e5%88%b6" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;h2 id="工具实践lighthouse"&gt;工具实践&lt;code&gt;Lighthouse&lt;/code&gt;&lt;a class="td-heading-self-link" href="#%e5%b7%a5%e5%85%b7%e5%ae%9e%e8%b7%b5lighthouse" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;</description></item></channel></rss>