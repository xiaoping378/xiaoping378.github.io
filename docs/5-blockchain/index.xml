<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>区块链 on 现代技能栈</title><link>https://xiaoping378.github.io/docs/5-blockchain/</link><description>Recent content in 区块链 on 现代技能栈</description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Sun, 23 Jan 2022 20:36:47 +0800</lastBuildDate><atom:link href="https://xiaoping378.github.io/docs/5-blockchain/index.xml" rel="self" type="application/rss+xml"/><item><title>什么是以太坊</title><link>https://xiaoping378.github.io/docs/5-blockchain/%E4%BB%A5%E5%A4%AA%E5%9D%8A-%E5%9F%BA%E7%A1%800/</link><pubDate>Thu, 05 Jan 2017 00:00:00 +0000</pubDate><guid>https://xiaoping378.github.io/docs/5-blockchain/%E4%BB%A5%E5%A4%AA%E5%9D%8A-%E5%9F%BA%E7%A1%800/</guid><description>&lt;h3 id="目录"&gt;目录&lt;a class="td-heading-self-link" href="#%e7%9b%ae%e5%bd%95" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;什么是以太坊&lt;/li&gt;
&lt;li&gt;应用场景&lt;/li&gt;
&lt;li&gt;趋势展望&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="内容"&gt;内容&lt;a class="td-heading-self-link" href="#%e5%86%85%e5%ae%b9" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;1.什么是以太坊&lt;/p&gt;
&lt;p&gt;以太坊是一个全新开放的区块链平台，它允许任何人在平台中建立和使用通过区块链技术运行的去中心化应用。&lt;/p&gt;
&lt;p&gt;1.1. 从名字说起&lt;/p&gt;
&lt;p&gt;以太坊 == ethereum，&lt;/p&gt;
&lt;p&gt;Ether，物理学里面有个以太，绝对静止的存在于空间的那种物质，尚未证明是否真实存在，在某领域里，它被称为虚空，空间…是一种能承载万物的东西，是一种目前还难以解释和观察的东西。&lt;/p&gt;
&lt;p&gt;至于这个“坊”字，也不知道是谁先翻译叫起来的，反正现在大家都这么叫。&lt;/p&gt;
&lt;p&gt;1.2 从功能说起&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.ethereum.org/ether"&gt;以太&lt;/a&gt;是区块链网络里很重要的元素 -- 燃料 -- 以太币，为计算付费。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1. 开发人员发布Dapp
2. 用户和Dapp交互
3. 挖矿得到报酬（维持网络稳定的）
4. 金融交易
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;1.3 从产出&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2014年9月份预售阶段发了6千万以太币，（募集到 31,531 个比特币）&lt;/li&gt;
&lt;li&gt;其中20%用于以太基金的运作，主要是给开发人员发工资。&lt;/li&gt;
&lt;li&gt;挖矿，大概每15秒左右出一个块，作为报酬，出块的人可以得到5个以太&lt;/li&gt;
&lt;li&gt;打包叔块的人会得到2-3个以太&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;自从&lt;a href="https://blog.ethereum.org/2017/10/12/byzantium-hf-announcement/"&gt;Byzantium update&lt;/a&gt;升级后，现在挖矿和挖到叔块的人会分别得到3和0.625-2.625个以太。&lt;/p&gt;
&lt;p&gt;1.4 FAQ&lt;/p&gt;
&lt;p&gt;1.4.1 以太比会无限发行么？&lt;/p&gt;
&lt;p&gt;不会， 当时预售的时候规定，每年的发行量是1800万上限（被挖到），计划在17年底，会切换共识算法从POW到&lt;a href="https://blog.ethereum.org/2015/08/01/introducing-casper-friendly-ghost/"&gt;Casper&lt;/a&gt;上，之后出块效率更高，需要的挖矿补贴更少, 具体发行多少，现在还未定。&lt;/p&gt;
&lt;p&gt;1.4.2 以太币和比特币的对比？&lt;/p&gt;
&lt;p&gt;如果后者，以太币是不可能实现的，在整个数字生态是互补关系，Ether应被视为“加密燃料”，其目的是为计算付费，而不是用作或被视为货币，资产，份额或其他任何东西。&lt;/p&gt;
&lt;p&gt;&lt;img src="https://www.ethereum.org/images/bitcoin-and-ethereum-sitting-on-a-tree@2x.png" alt=""&gt;&lt;/p&gt;
&lt;p&gt;技术层面的对比&lt;/p&gt;
&lt;p&gt;&lt;img src="https://xiaoping378.github.io/BTC-ETH.png" alt=""&gt;&lt;/p&gt;
&lt;p&gt;1.2 账户&lt;/p&gt;
&lt;p&gt;以太坊有两种类型的账户：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;外部账户（由私钥控制的）&lt;/li&gt;
&lt;li&gt;合约账户（由合约代码控制）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;另种账户都可以发起交易，后者被动发送。&lt;/p&gt;
&lt;p&gt;外部所有的账户没有代码，人们可以通过创建和签名一笔交易从一个外部账户发送消息。每当合约账户收到一条消息，合约内部的代码就会被激活，允许它对内部存储进行读取和写入，和发送其它消息或者创建合约。&lt;/p&gt;
&lt;p&gt;UTXOs的好处有：
更加私密（用户要是每笔交易都换一个地址，那么就很难找到其中两个地址的相关性）；潜在的可扩展性。&lt;/p&gt;
&lt;p&gt;账户的好处：
节省大量空间（每笔交易只有一个输入、一个输出、一个签名）；更大的可替代性；简单（编码简单，不需要更为复杂脚本）；&lt;/p&gt;
&lt;p&gt;1.3 以太坊虚拟机EVM&lt;/p&gt;</description></item><item><title>搭建以太坊私链网络</title><link>https://xiaoping378.github.io/docs/5-blockchain/%E4%BB%A5%E5%A4%AA%E5%9D%8A-%E7%A7%81%E6%9C%89%E9%93%BE%E6%90%AD%E5%BB%BA%E5%88%9D%E6%AD%A5%E5%AE%9E%E8%B7%B5/</link><pubDate>Thu, 05 Jan 2017 00:00:00 +0000</pubDate><guid>https://xiaoping378.github.io/docs/5-blockchain/%E4%BB%A5%E5%A4%AA%E5%9D%8A-%E7%A7%81%E6%9C%89%E9%93%BE%E6%90%AD%E5%BB%BA%E5%88%9D%E6%AD%A5%E5%AE%9E%E8%B7%B5/</guid><description>&lt;p&gt;大量过时文章充斥于网络，本文基于官方go-tehereum 1.6.7版本整理而出，在geth1.6之后引入了一个&lt;strong&gt;puppeth&lt;/strong&gt;工具，它就是用来初始一个私链创世块配置的。&lt;/p&gt;
&lt;h3 id="准备工具环境"&gt;准备工具环境&lt;a class="td-heading-self-link" href="#%e5%87%86%e5%a4%87%e5%b7%a5%e5%85%b7%e7%8e%af%e5%a2%83" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;下载&lt;code&gt;go-ethereum代码&lt;/code&gt;（go的开发环境准备，不在此文范围）&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;# 下载源码&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;go get github.com/ethereum/go-ethereum
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a2f"&gt;cd&lt;/span&gt; &lt;span style="color:#b8860b"&gt;$GOPATH&lt;/span&gt;/src/github.com/ethereum/go-ethereum
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;# 编译1.6.7版本的代码&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;git checkout -b v1.6.7 v1.6.7
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;make all
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;# 安装&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo ln -s &lt;span style="color:#b8860b"&gt;$PWD&lt;/span&gt;/build/bin/* /usr/local/bin/
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;# 检查是否安装OK&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;geth version
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Geth
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Version: 1.6.7-stable
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Git Commit: ab5646c532292b51e319f290afccf6a44f874372
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Architecture: amd64
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Protocol Versions: &lt;span style="color:#666"&gt;[&lt;/span&gt;&lt;span style="color:#666"&gt;63&lt;/span&gt; 62&lt;span style="color:#666"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Network Id: &lt;span style="color:#666"&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Go Version: go1.8.3
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Operating System: linux
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#b8860b"&gt;GOPATH&lt;/span&gt;&lt;span style="color:#666"&gt;=&lt;/span&gt;/home/xxp/go
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#b8860b"&gt;GOROOT&lt;/span&gt;&lt;span style="color:#666"&gt;=&lt;/span&gt;/home/xxp/Software/go
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="生成私链创世块的配置"&gt;生成私链创世块的配置&lt;a class="td-heading-self-link" href="#%e7%94%9f%e6%88%90%e7%a7%81%e9%93%be%e5%88%9b%e4%b8%96%e5%9d%97%e7%9a%84%e9%85%8d%e7%bd%ae" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;创建账户&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;# 创建testnet目录&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;➜ mkdir testnet &lt;span style="color:#666"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style="color:#a2f"&gt;cd&lt;/span&gt; testnet
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;# 创建3个普通账户，密码自定&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;➜ geth --datadir node0 account new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;# 把密码记录到文件里，后面会频繁输入&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;➜ &lt;span style="color:#a2f"&gt;echo&lt;/span&gt; node0 &amp;gt; node0/password
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;➜ geth --datadir node1 account new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;➜ &lt;span style="color:#a2f"&gt;echo&lt;/span&gt; node1 &amp;gt; node1/password
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;➜ geth --datadir node2 account new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;➜ &lt;span style="color:#a2f"&gt;echo&lt;/span&gt; node2 &amp;gt; node2/password
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如上打印的一串16进制的字符串就代表账户的userID（理解成网络中的IP地址），后面puppeth需要用到。&lt;/p&gt;</description></item><item><title>以太坊的truffle box开发实战</title><link>https://xiaoping378.github.io/docs/5-blockchain/%E4%BB%A5%E5%A4%AA%E5%9D%8A-truffle-box%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/</link><pubDate>Thu, 05 Jan 2017 00:00:00 +0000</pubDate><guid>https://xiaoping378.github.io/docs/5-blockchain/%E4%BB%A5%E5%A4%AA%E5%9D%8A-truffle-box%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/</guid><description>&lt;p&gt;整个过程主要演示chrome扩展 METAMASK， OpenZepplin库和truffle框架的使用。&lt;/p&gt;
&lt;h3 id="搭建私连网络"&gt;搭建私连网络&lt;a class="td-heading-self-link" href="#%e6%90%ad%e5%bb%ba%e7%a7%81%e8%bf%9e%e7%bd%91%e7%bb%9c" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;主要参考之前的&lt;a href="../%E4%BB%A5%E5%A4%AA%E5%9D%8A-%E7%A7%81%E6%9C%89%E9%93%BE%E6%90%AD%E5%BB%BA%E5%88%9D%E6%AD%A5%E5%AE%9E%E8%B7%B5"&gt;以太坊-私有链搭建初步实践&lt;/a&gt;， 这里只用单节点的网络。&lt;/p&gt;
&lt;p&gt;还是先准备账户：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mkdir node0
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;# 会在node0/keystore目录里生成一个keyfile json文件&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;geth --datadir node0 account new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;#利用puppeth生成genesis.json的过程不表，参考上边的链接&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;geth --datadir node0 init genesis.json
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;# 把刚才的账号的密码写入node0/password文件&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;# 启动私链，顺便开启console&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a2f"&gt;echo&lt;/span&gt; node0 &amp;gt; node0/password
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;geth --datadir node0 --port &lt;span style="color:#666"&gt;30000&lt;/span&gt; --nodiscover --unlock &lt;span style="color:#b44"&gt;&amp;#39;0&amp;#39;&lt;/span&gt; --password ./node0/password --mine --rpc --rpccorsdomain &lt;span style="color:#b44"&gt;&amp;#34;*&amp;#34;&lt;/span&gt; --rpcapi &lt;span style="color:#b44"&gt;&amp;#34;eth,net,web3,admin,personal&amp;#34;&lt;/span&gt; console
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;我们把这个账号的json文件导入到chorme插件metamask里，便于后面调试和演示&lt;/p&gt;
&lt;p&gt;&lt;img src="https://xiaoping378.github.io/ethereum-new-account.png" alt=""&gt;&lt;/p&gt;
&lt;p&gt;ubuntu系统上的chrome插件会有窗口消失的bug，在URL栏里打开&lt;code&gt;chrome-extension://nkbihfbeogaeaoehlefnkodbefgpgknn/popup.html&lt;/code&gt;&lt;/p&gt;
&lt;h3 id="truflle初始化项目"&gt;truflle初始化项目&lt;a class="td-heading-self-link" href="#truflle%e5%88%9d%e5%a7%8b%e5%8c%96%e9%a1%b9%e7%9b%ae" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;需要下载truffle命令号&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;npm install -g truffle
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mkdir token &lt;span style="color:#666"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style="color:#a2f"&gt;cd&lt;/span&gt; token
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;# 利用trulle下载token代笔示例&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;truffle unbox tutorialtoken
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;npm intall zeppelin-solidity
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如上必要的依赖框架和库已经下载到了本地， 接下来就创建自己的代币合约&lt;/p&gt;</description></item><item><title>fomo3d-上线部署要点</title><link>https://xiaoping378.github.io/docs/5-blockchain/fomo3d-%E4%B8%8A%E7%BA%BF%E9%83%A8%E7%BD%B2%E8%A6%81%E7%82%B9/</link><pubDate>Thu, 05 Jan 2017 00:00:00 +0000</pubDate><guid>https://xiaoping378.github.io/docs/5-blockchain/fomo3d-%E4%B8%8A%E7%BA%BF%E9%83%A8%E7%BD%B2%E8%A6%81%E7%82%B9/</guid><description>&lt;p&gt;fomo3d游戏一出，国内疯狂clone上线，这里谈下我上线的思路和部署方法（纯手动的^_^，落伍了）&lt;/p&gt;
&lt;p&gt;通过&lt;a href="https://etherscan.io/address/0xa62142888aba8370742be823c1782d17a0389da1#code"&gt;原版合约地址&lt;/a&gt;，可以一层一层的拔下所有涉及到的合约代码。&lt;/p&gt;
&lt;p&gt;目前据我统计共有8个合约，其中有两个闭源合约：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;F3DexternalSettingsInterface&lt;/li&gt;
&lt;li&gt;JIincInterfaceForForwarder&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;闭源合约不可怕，看明白什么功能，自己hack掉是不影响游戏本身的。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;提前预警，合约的内容细节还是要自己研究的，没时间写太细，
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;其实这个游戏本身只需要2个合约就可以跑起来，且没实质影响，只是单纯改变了部分利益分配方式。&lt;/p&gt;
&lt;p&gt;下面说明，我尽可能少改动原版的情况下，部署上线合约，移除p3d修改后的原版合约代码&lt;a href="https://github.com/ChungkueiBlock/fomo3d/tree/master/sols"&gt;在这里&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="部署前的准备"&gt;部署前的准备&lt;a class="td-heading-self-link" href="#%e9%83%a8%e7%bd%b2%e5%89%8d%e7%9a%84%e5%87%86%e5%a4%87" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;我一般使用&lt;a href="https://remix.ethereum.org/#optimize=true&amp;amp;version=soljson-v0.4.24"&gt;在线remix&lt;/a&gt;工具部署合约在自己的私链上调试，私链建议如下启动（一键解万忧的方式，推荐创世块采用&lt;a href="https://github.com/ChungkueiBlock/tools/tree/master/privateEth"&gt;POA共识&lt;/a&gt;-不消耗CPU），这样可以使用remix的debug功能&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;geth \
 --datadir ./node0\
 --ws\
 --wsaddr 0.0.0.0\
 --wsapi &amp;#34;eth,net,web3,admin,personal,txpool,miner,clique,debug&amp;#34;\
 --wsport 8546\
 --wsorigins &amp;#34;*&amp;#34;\
 --rpc\
 --rpcapi &amp;#34;eth,net,web3,admin,personal,txpool,miner,clique,debug&amp;#34;\
 --rpccorsdomain &amp;#34;*&amp;#34;\
 --rpcaddr 0.0.0.0\
 --rpcport 8545\
 --rpcvhosts &amp;#34;*&amp;#34;\
 --mine\
 --etherbase 0xdbeb69c655b666b3e17b8061df7ea4cc2399df11\
 --unlock 0xdbeb69c655b666b3e17b8061df7ea4cc2399df11\
 --password ./password\
 --nodiscover\
 --maxpeers &amp;#39;50&amp;#39;\
 --networkid 378\
 --targetgaslimit 471238800\
 &amp;amp;
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="部署合约"&gt;部署合约&lt;a class="td-heading-self-link" href="#%e9%83%a8%e7%bd%b2%e5%90%88%e7%ba%a6" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;按先后顺序如下部署&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href="https://github.com/ChungkueiBlock/sols/blob/master/fomo3d/Hourglass.sol"&gt;p3d合约&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;真心不推荐部署带有p3d合约的游戏，这样项目方就可以吃掉本来要流到这里25%左右的流水资金了&lt;/p&gt;
&lt;p&gt;我对p3d的合约内容还没有很深的研究，只知道它&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;是一个自带“交易所”、发行总量为0的Token，&lt;/li&gt;
&lt;li&gt;通过Eth买入会自动增发，卖出会销毁&lt;/li&gt;
&lt;li&gt;买入和卖出都会扣掉10%的费用给仍持有Token的人&lt;/li&gt;
&lt;li&gt;每买一次都会使Token升值&lt;/li&gt;
&lt;li&gt;每卖一次会使Token降价&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这个合约不需要改动，贴源码，编译后部署截图如下，点击红色记录下来部署后的合约地址&lt;/p&gt;
&lt;p&gt;&lt;img src="https://xiaoping378.github.io/p3d%E9%83%A8%E7%BD%B2.jpg" alt="p3d"&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;部署divies合约&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这个合约专门往p3d持有者发分红的。&lt;/p&gt;
&lt;p&gt;把刚才记录的p3d合约地址，替换到&lt;code&gt;HourglassInterface&lt;/code&gt;后面的地址。如上贴源码，编译后部署&lt;code&gt;Divies&lt;/code&gt;合约，&lt;/p&gt;
&lt;p&gt;记录下divies的地址，并替换fomo3dlong.sol里的&lt;code&gt;DiviesInterface&lt;/code&gt;地址&lt;/p&gt;</description></item><item><title>fomo3d-钱都去哪儿了</title><link>https://xiaoping378.github.io/docs/5-blockchain/fomo3d-%E9%92%B1%E9%83%BD%E5%8E%BB%E5%93%AA%E5%84%BF%E4%BA%86/</link><pubDate>Thu, 05 Jan 2017 00:00:00 +0000</pubDate><guid>https://xiaoping378.github.io/docs/5-blockchain/fomo3d-%E9%92%B1%E9%83%BD%E5%8E%BB%E5%93%AA%E5%84%BF%E4%BA%86/</guid><description>&lt;p&gt;fomo3d里有战队系统、邀请分佣机制、持key分红、空投系统、持p3d分红等玩法, 相信通过之前各类媒体的解读都有所了解。&lt;/p&gt;
&lt;p&gt;下面通过分析合约代码，以讲解ETH数据流向的方式串下所有流程，让大家明明白白的知道自己的ETH都去了哪里。&lt;/p&gt;
&lt;p&gt;以10ETH充币到fomod3d合约举例，分三种情况&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;早期用户（游戏刚启动时的激进者）&lt;/li&gt;
&lt;li&gt;中期用户（为了赚分红、返佣的用户）&lt;/li&gt;
&lt;li&gt;晚期用户（为了赢48%大奖的人）&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="早期"&gt;早期&lt;a class="td-heading-self-link" href="#%e6%97%a9%e6%9c%9f" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;当合约被激活后，开发者做了一个很“仇富”的举动，每个地址在合约收到100ETH之前，只能购买1ETH的keys，防止被资本大鳄收割本轮后面入场的玩家。这里有个小hack的点，就是提前多准备些小号，多个地址去投，也可以做到比别人便宜多的价格买到keys。&lt;/p&gt;
&lt;p&gt;这个阶段以买入10ETH举例，你只会买到等同于1ETH价值的keys，其余9个ETH会直接进入你的收益里，
演示如下：&lt;/p&gt;
&lt;p&gt;&lt;img src="https://xiaoping378.github.io/ethLimiter2.png" alt="ethLimiter2"&gt;&lt;/p&gt;
&lt;p&gt;下面是实现此功能的代码&lt;/p&gt;
&lt;p&gt;&lt;img src="https://xiaoping378.github.io/ethLimiter.png" alt="ethLimiter"&gt;&lt;/p&gt;
&lt;p&gt;代码里的规则(不限阶段)梳理：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;提款功能可以无限次提，不影响本轮接下来的分红收益，你的收益来自于你持有keys的分红。&lt;/li&gt;
&lt;li&gt;最低可以支付1e-09个Ether，当购买的Key数量大于或者等于1个时，倒计时会加30秒。&lt;/li&gt;
&lt;li&gt;当支付的eth不小于0.1时，会送一次“彩票”，买key支付的金额越大，中奖的奖金也越大，最大可中“彩票池”里额度的75%，直译过来这个功能叫空投。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="中期"&gt;中期&lt;a class="td-heading-self-link" href="#%e4%b8%ad%e6%9c%9f" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;所有阶段的用户如果是直接打开的官网，充币买keys时会触发合约的这个接口，&lt;/p&gt;
&lt;p&gt;&lt;img src="https://xiaoping378.github.io/buyXaddr.png" alt="buyXaddr"&gt;&lt;/p&gt;
&lt;p&gt;其中_affcode是值邀请人的地址，_team是指用户所有购买key所选的战队，默认的2是指蛇队。&lt;/p&gt;
&lt;p&gt;如果是从别人的邀请进入的官网，要看邀请人给你发的是哪个链接，有三种形式的链接：&lt;/p&gt;
&lt;p&gt;&lt;img src="https://xiaoping378.github.io/affiliate.png" alt="affiliate"&gt;,&lt;/p&gt;
&lt;p&gt;从上到下，分别会走&lt;code&gt;buyXaddr&lt;/code&gt;、&lt;code&gt;buyXid&lt;/code&gt;、&lt;code&gt;buyXname&lt;/code&gt;的接口，比如我给人发了&lt;a href="http://exitscam.me/xxp"&gt;exitscam.me/xxp&lt;/a&gt;的邀请链接，被邀的人买keys时会触发如下接口：&lt;/p&gt;
&lt;p&gt;&lt;img src="https://xiaoping378.github.io/affiliate2.png" alt="affiliate2"&gt;&lt;/p&gt;
&lt;p&gt;这其中我个人会收到他买key总额度的10%佣金，这里还有个隐藏的点：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;如果用户是直接从官网进入买key的，那同样会有10%佣金的产生，只不过是流向p3d的持有者。
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id="晚期"&gt;晚期&lt;a class="td-heading-self-link" href="#%e6%99%9a%e6%9c%9f" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;当有人买key时，都会选择一个战队，默认会被勾选蛇队的，当买到keys数量不小于1个时，会使所选战队成为本轮的潜在获胜队。&lt;/p&gt;
&lt;p&gt;说了这么多废话，回归正体，你的10ETH到底去了哪里？？？&lt;/p&gt;
&lt;p&gt;如果支付10ETH时，选的是蛇队，你10个ETH里的5.6个会被持keys的人均分，1个看情况是给p3d的人还是给邀请你的人，还有1个必定会分给持有p3d的人，另外2个会进入大池子，其中0.2个会分给社区贡献人，0.1个会给TeamJust的另一个游戏合约，还有0.1个会流到“彩票池”里。&lt;/p&gt;
&lt;p&gt;这里面根据你选的战队不通，分配比例不一样，具体看下的代码，执行这些ETH分配的是走&lt;code&gt;distributeExternal&lt;/code&gt;，&lt;code&gt;distributeInternal&lt;/code&gt; 出去的。&lt;/p&gt;
&lt;p&gt;后面的PotSpit是本轮游戏结束后，如何分配大池子里的金额。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-javascript" data-lang="javascript"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;// Team allocation structures
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;// 0 = whales
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;// 1 = bears
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;// 2 = sneks
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;// 3 = bulls
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;// Team allocation percentages
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;// (F3D, P3D) + (Pot , Referrals, Community)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;// Referrals / Community rewards are mathematically designed to come from the winner&amp;#39;s share of the pot.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;&lt;/span&gt;fees_[&lt;span style="color:#666"&gt;0&lt;/span&gt;] &lt;span style="color:#666"&gt;=&lt;/span&gt; F3Ddatasets.TeamFee(&lt;span style="color:#666"&gt;30&lt;/span&gt;,&lt;span style="color:#666"&gt;6&lt;/span&gt;); &lt;span style="color:#080;font-style:italic"&gt;//50% to pot, 10% to aff, 2% to com, 1% to pot swap, 1% to air drop pot
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;&lt;/span&gt;fees_[&lt;span style="color:#666"&gt;1&lt;/span&gt;] &lt;span style="color:#666"&gt;=&lt;/span&gt; F3Ddatasets.TeamFee(&lt;span style="color:#666"&gt;43&lt;/span&gt;,&lt;span style="color:#666"&gt;0&lt;/span&gt;); &lt;span style="color:#080;font-style:italic"&gt;//43% to pot, 10% to aff, 2% to com, 1% to pot swap, 1% to air drop pot
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;&lt;/span&gt;fees_[&lt;span style="color:#666"&gt;2&lt;/span&gt;] &lt;span style="color:#666"&gt;=&lt;/span&gt; F3Ddatasets.TeamFee(&lt;span style="color:#666"&gt;56&lt;/span&gt;,&lt;span style="color:#666"&gt;10&lt;/span&gt;); &lt;span style="color:#080;font-style:italic"&gt;//20% to pot, 10% to aff, 2% to com, 1% to pot swap, 1% to air drop pot
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;&lt;/span&gt;fees_[&lt;span style="color:#666"&gt;3&lt;/span&gt;] &lt;span style="color:#666"&gt;=&lt;/span&gt; F3Ddatasets.TeamFee(&lt;span style="color:#666"&gt;43&lt;/span&gt;,&lt;span style="color:#666"&gt;8&lt;/span&gt;); &lt;span style="color:#080;font-style:italic"&gt;//35% to pot, 10% to aff, 2% to com, 1% to pot swap, 1% to air drop pot
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;// how to split up the final pot based on which team was picked
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;// (F3D, P3D)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;&lt;/span&gt;potSplit_[&lt;span style="color:#666"&gt;0&lt;/span&gt;] &lt;span style="color:#666"&gt;=&lt;/span&gt; F3Ddatasets.PotSplit(&lt;span style="color:#666"&gt;15&lt;/span&gt;,&lt;span style="color:#666"&gt;10&lt;/span&gt;); &lt;span style="color:#080;font-style:italic"&gt;//48% to winner, 25% to next round, 2% to com
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;&lt;/span&gt;potSplit_[&lt;span style="color:#666"&gt;1&lt;/span&gt;] &lt;span style="color:#666"&gt;=&lt;/span&gt; F3Ddatasets.PotSplit(&lt;span style="color:#666"&gt;25&lt;/span&gt;,&lt;span style="color:#666"&gt;0&lt;/span&gt;); &lt;span style="color:#080;font-style:italic"&gt;//48% to winner, 25% to next round, 2% to com
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;&lt;/span&gt;potSplit_[&lt;span style="color:#666"&gt;2&lt;/span&gt;] &lt;span style="color:#666"&gt;=&lt;/span&gt; F3Ddatasets.PotSplit(&lt;span style="color:#666"&gt;20&lt;/span&gt;,&lt;span style="color:#666"&gt;20&lt;/span&gt;); &lt;span style="color:#080;font-style:italic"&gt;//48% to winner, 10% to next round, 2% to com
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;&lt;/span&gt;potSplit_[&lt;span style="color:#666"&gt;3&lt;/span&gt;] &lt;span style="color:#666"&gt;=&lt;/span&gt; F3Ddatasets.PotSplit(&lt;span style="color:#666"&gt;30&lt;/span&gt;,&lt;span style="color:#666"&gt;10&lt;/span&gt;); &lt;span style="color:#080;font-style:italic"&gt;//48% to winner, 10% to next round, 2% to com
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;还有很多细节要分享，碍于时间有限，不过我会持续更新这里的&lt;/p&gt;</description></item><item><title>解读cosmos-sdk系列(1)</title><link>https://xiaoping378.github.io/docs/5-blockchain/cosmos_sdk_1/</link><pubDate>Thu, 05 Jan 2017 00:00:00 +0000</pubDate><guid>https://xiaoping378.github.io/docs/5-blockchain/cosmos_sdk_1/</guid><description>&lt;p&gt;通过本系列，可以了解tendermint共识和cosmos-sdk架构的设计思想，并学习到如何通过Cosmos-SDK来快速开发自己的区块链应用。&lt;/p&gt;
&lt;p&gt;cosmos团队把区块链分成了三层&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;网络层 - p2p负责广播交易&lt;/li&gt;
&lt;li&gt;共识层 - 对哪些交易打包进块形成共识&lt;/li&gt;
&lt;li&gt;应用层 - 执行交易，负责交易结果落盘（状态一致）&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;这里的应用层可能会有误解，并非是Dapp层，对于SDK底层的Tendermint来说，除p2p网络和打包块共识外，其他都算是应用部分，
拿实现比特币公链的例子来讲，应用部分就是维护账户的UTXO数据库，如果对比以太的话，keystore账户和EVM虚机部分就是应用范畴，所以SDK内置了账户、质押、治理、权限等应用模块，可以帮助我们简单地实现底层链的开发。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;可以把这几层简单理解成各节点通过同步交易集（块）日志，实现数据（状态）一致性。数据库的主从模式不也是同步binlog日志，各自执行（replay，回放）日志后，实现数据（状态）最终落盘，区块节点本身同步块的时候，默认就是去下载交易日志，把执行结果按照逻辑链的形式写入本地leveldb的，然后才能对外提供各类RPC服务。&lt;/p&gt;
&lt;h2 id="tendermint共识"&gt;tendermint共识&lt;a class="td-heading-self-link" href="#tendermint%e5%85%b1%e8%af%86" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;为后续更好的利用cosmos-sdk，要先了解下Tendermint。&lt;/p&gt;
&lt;p&gt;Tendermint Core 提供了网络和共识层功能，而应用层要通过ABCI协议和Core互通消息msg，简单讲tendermint负责起一个replication engine进程，而应用层要运行一个state macheine进程，进程间通过ABCI消息来通信。&lt;/p&gt;
&lt;p&gt;ABCI协议的消息体用protobuf定义在&lt;a href="https://github.com/tendermint/tendermint/blob/master/abci/types/types.proto"&gt;这里&lt;/a&gt;，app侧可以响应的request如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-golang" data-lang="golang"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;message&lt;span style="color:#bbb"&gt; &lt;/span&gt;Request&lt;span style="color:#bbb"&gt; &lt;/span&gt;{&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;oneof&lt;span style="color:#bbb"&gt; &lt;/span&gt;value&lt;span style="color:#bbb"&gt; &lt;/span&gt;{&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;RequestEcho&lt;span style="color:#bbb"&gt; &lt;/span&gt;echo&lt;span style="color:#bbb"&gt; &lt;/span&gt;=&lt;span style="color:#bbb"&gt; &lt;/span&gt;&lt;span style="color:#666"&gt;2&lt;/span&gt;;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;RequestFlush&lt;span style="color:#bbb"&gt; &lt;/span&gt;flush&lt;span style="color:#bbb"&gt; &lt;/span&gt;=&lt;span style="color:#bbb"&gt; &lt;/span&gt;&lt;span style="color:#666"&gt;3&lt;/span&gt;;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;RequestInfo&lt;span style="color:#bbb"&gt; &lt;/span&gt;info&lt;span style="color:#bbb"&gt; &lt;/span&gt;=&lt;span style="color:#bbb"&gt; &lt;/span&gt;&lt;span style="color:#666"&gt;4&lt;/span&gt;;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;RequestSetOption&lt;span style="color:#bbb"&gt; &lt;/span&gt;set_option&lt;span style="color:#bbb"&gt; &lt;/span&gt;=&lt;span style="color:#bbb"&gt; &lt;/span&gt;&lt;span style="color:#666"&gt;5&lt;/span&gt;;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;RequestInitChain&lt;span style="color:#bbb"&gt; &lt;/span&gt;init_chain&lt;span style="color:#bbb"&gt; &lt;/span&gt;=&lt;span style="color:#bbb"&gt; &lt;/span&gt;&lt;span style="color:#666"&gt;6&lt;/span&gt;;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;RequestQuery&lt;span style="color:#bbb"&gt; &lt;/span&gt;query&lt;span style="color:#bbb"&gt; &lt;/span&gt;=&lt;span style="color:#bbb"&gt; &lt;/span&gt;&lt;span style="color:#666"&gt;7&lt;/span&gt;;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;RequestBeginBlock&lt;span style="color:#bbb"&gt; &lt;/span&gt;begin_block&lt;span style="color:#bbb"&gt; &lt;/span&gt;=&lt;span style="color:#bbb"&gt; &lt;/span&gt;&lt;span style="color:#666"&gt;8&lt;/span&gt;;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;RequestCheckTx&lt;span style="color:#bbb"&gt; &lt;/span&gt;check_tx&lt;span style="color:#bbb"&gt; &lt;/span&gt;=&lt;span style="color:#bbb"&gt; &lt;/span&gt;&lt;span style="color:#666"&gt;9&lt;/span&gt;;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;RequestDeliverTx&lt;span style="color:#bbb"&gt; &lt;/span&gt;deliver_tx&lt;span style="color:#bbb"&gt; &lt;/span&gt;=&lt;span style="color:#bbb"&gt; &lt;/span&gt;&lt;span style="color:#666"&gt;19&lt;/span&gt;;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;RequestEndBlock&lt;span style="color:#bbb"&gt; &lt;/span&gt;end_block&lt;span style="color:#bbb"&gt; &lt;/span&gt;=&lt;span style="color:#bbb"&gt; &lt;/span&gt;&lt;span style="color:#666"&gt;11&lt;/span&gt;;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;RequestCommit&lt;span style="color:#bbb"&gt; &lt;/span&gt;commit&lt;span style="color:#bbb"&gt; &lt;/span&gt;=&lt;span style="color:#bbb"&gt; &lt;/span&gt;&lt;span style="color:#666"&gt;12&lt;/span&gt;;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;}&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt;&lt;/span&gt;}&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ABCI的设计主要有以下几个特点：&lt;/p&gt;</description></item><item><title>farbic-搭建高并发交易网络</title><link>https://xiaoping378.github.io/docs/5-blockchain/farbic-%E5%8C%BA%E5%9D%97%E9%93%BE%E7%BD%91%E7%BB%9C%E6%90%AD%E5%BB%BA/</link><pubDate>Thu, 05 Jan 2017 00:00:00 +0000</pubDate><guid>https://xiaoping378.github.io/docs/5-blockchain/farbic-%E5%8C%BA%E5%9D%97%E9%93%BE%E7%BD%91%E7%BB%9C%E6%90%AD%E5%BB%BA/</guid><description>&lt;p&gt;针对每秒数千笔交易的场景，默认的CCVC（并发控制版本检查）会导致交易失败率的上升，其实不需要对基础网络本身做特殊设置，从合约代码入手可以解决，参考官方例子&lt;a href="https://github.com/hyperledger/fabric-samples"&gt;farbic-samples&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id="下载项目"&gt;下载项目&lt;a class="td-heading-self-link" href="#%e4%b8%8b%e8%bd%bd%e9%a1%b9%e7%9b%ae" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;基于目前最新的v1.0.3版本来说&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;git clone https://github.com/hyperledger/fabric-samples.git
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a2f"&gt;cd&lt;/span&gt; fabric-samples/first-network
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;未完...&lt;/p&gt;</description></item><item><title>fabric-示例集群化操作</title><link>https://xiaoping378.github.io/docs/5-blockchain/frabic-%E7%A4%BA%E4%BE%8B%E9%9B%86%E7%BE%A4%E5%8C%96%E6%93%8D%E4%BD%9C/</link><pubDate>Thu, 05 Jan 2017 00:00:00 +0000</pubDate><guid>https://xiaoping378.github.io/docs/5-blockchain/frabic-%E7%A4%BA%E4%BE%8B%E9%9B%86%E7%BE%A4%E5%8C%96%E6%93%8D%E4%BD%9C/</guid><description>&lt;p&gt;fabric给出的cc样例都是跑在docker-compose上，这里介绍利用已有的docker-compose.yaml如何集群化运行。&lt;/p&gt;
&lt;h3 id="准备样例cc"&gt;准备样例CC&lt;a class="td-heading-self-link" href="#%e5%87%86%e5%a4%87%e6%a0%b7%e4%be%8bcc" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;以官方&lt;code&gt;fabric-samples&lt;/code&gt;项目里的balance-transfer为例，准备拆分运行在4个虚机里。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;git clone https://github.com/hyperledger/fabric-samples.git
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a2f"&gt;cd&lt;/span&gt; fabric-samples/balance-transfer
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;本CC的示例，主要由3个部分组成:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2 CAs&lt;/li&gt;
&lt;li&gt;1 SOLO orderer&lt;/li&gt;
&lt;li&gt;4 peers (2 peers per Org)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其中&lt;code&gt;artifacts&lt;/code&gt;目录里放置了：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;由 &lt;strong&gt;cryptogen&lt;/strong&gt; 工具生成的证书信息，后面运行时需要挂载到各自的peer节点里&lt;/li&gt;
&lt;li&gt;由 &lt;strong&gt;configtxgen&lt;/strong&gt; 工具生成的初始块 &lt;code&gt;genesis.block&lt;/code&gt; 和 channel配置信息&lt;code&gt;mychannell.tx&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="准备集群"&gt;准备集群&lt;a class="td-heading-self-link" href="#%e5%87%86%e5%a4%87%e9%9b%86%e7%be%a4" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;根据上面的情况，下面准备四个虚机来集群化操作, 虚机规划信息如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;air13, 192.168.10.78, 运行ca1，ca2, 这是我的本机&lt;/li&gt;
&lt;li&gt;node0, 192.168.10.110, 运行orderer&lt;/li&gt;
&lt;li&gt;node1, 192.168.10.114, 运行org1的peer0、peer1&lt;/li&gt;
&lt;li&gt;node2, 192.168.10.115, 运行org2的peer0、peer1&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;每个虚机都预先安装docker和docker-compose&lt;/p&gt;
&lt;p&gt;修改&lt;code&gt;artifacts/docker-compose.yaml&lt;/code&gt;文件，在每个service下添加如下信息：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;&lt;span style="color:#008000;font-weight:bold"&gt;extra_hosts&lt;/span&gt;:&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;- &lt;span style="color:#b44"&gt;&amp;#34;ca.org1.example.com:192.168.10.78&amp;#34;&lt;/span&gt;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;- &lt;span style="color:#b44"&gt;&amp;#34;ca.org2.example.com:192.168.10.78&amp;#34;&lt;/span&gt;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;- &lt;span style="color:#b44"&gt;&amp;#34;orderer.example.com:192.168.10.110&amp;#34;&lt;/span&gt;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;- &lt;span style="color:#b44"&gt;&amp;#34;peer0.org1.example.com:192.168.10.114&amp;#34;&lt;/span&gt;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;- &lt;span style="color:#b44"&gt;&amp;#34;peer1.org1.example.com:192.168.10.114&amp;#34;&lt;/span&gt;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;- &lt;span style="color:#b44"&gt;&amp;#34;peer0.org2.example.com:192.168.10.115&amp;#34;&lt;/span&gt;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#bbb"&gt; &lt;/span&gt;- &lt;span style="color:#b44"&gt;&amp;#34;peer1.org2.example.com:192.168.10.115&amp;#34;&lt;/span&gt;&lt;span style="color:#bbb"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;此举的作用是在每个容器的&lt;code&gt;/etc/hosts&lt;/code&gt;文件里，添加上面的映射，最终docker-compose.yaml文件放置&lt;a href="https://gist.github.com/xiaoping378/8ba8e796552e27277073e56cfd7b281a"&gt;gist&lt;/a&gt;上了.&lt;/p&gt;
&lt;p&gt;最后一步，因为此CC样例运行时，需要挂载本地目录里一些提前生成好的证书，我们还需要把这么需要挂载的东西，同步到每个虚机里，如下操作：&lt;/p&gt;</description></item><item><title>farbic-区块链的生产集群化</title><link>https://xiaoping378.github.io/docs/5-blockchain/farbic%E5%8C%BA%E5%9D%97%E9%93%BE%E7%9A%84%E9%9B%86%E7%BE%A4%E5%8C%96-kubernetes%E5%AE%9E%E6%88%98/</link><pubDate>Thu, 05 Jan 2017 00:00:00 +0000</pubDate><guid>https://xiaoping378.github.io/docs/5-blockchain/farbic%E5%8C%BA%E5%9D%97%E9%93%BE%E7%9A%84%E9%9B%86%E7%BE%A4%E5%8C%96-kubernetes%E5%AE%9E%E6%88%98/</guid><description>&lt;p&gt;默认社区的demo是基于docker-compose给出的，达到了“一键部署”的效果，但生产上考虑多节点的情况，还需要费些手脚，这里考虑用kompose结合k8s来做这件事。&lt;/p&gt;
&lt;h3 id="k8s集群-1-7的初始化"&gt;k8s集群 1.7的初始化&lt;a class="td-heading-self-link" href="#k8s%e9%9b%86%e7%be%a4-1-7%e7%9a%84%e5%88%9d%e5%a7%8b%e5%8c%96" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;每个节点都要安装docker的步骤，此处略过不表，这里主要介绍利用kubeadm初始化k8s集群，这里不考虑k8s集群本身的高可用，以前有文章专门介绍过。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apt-get update &lt;span style="color:#666"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get install -y apt-transport-https
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add -
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cat &lt;span style="color:#b44"&gt;&amp;lt;&amp;lt;EOF &amp;gt;/etc/apt/sources.list.d/kubernetes.list
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#b44"&gt;deb http://apt.kubernetes.io/ kubernetes-xenial main
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#b44"&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apt-get update
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apt-get install -y kubelet kubeadm
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;# 默认会自动安装这些包 ebtables kubeadm kubectl kubelet kubernetes-cni socat&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果你本机是centos的话，可以用如下命令安装&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cat &lt;span style="color:#b44"&gt;&amp;lt;&amp;lt;EOF &amp;gt; /etc/yum.repos.d/kubernetes.repo
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#b44"&gt;[kubernetes]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#b44"&gt;name=Kubernetes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#b44"&gt;baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#b44"&gt;enabled=1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#b44"&gt;gpgcheck=1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#b44"&gt;repo_gpgcheck=1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#b44"&gt;gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#b44"&gt; https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#b44"&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;setenforce &lt;span style="color:#666"&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;yum install -y kubelet kubeadm
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;systemctl &lt;span style="color:#a2f"&gt;enable&lt;/span&gt; kubelet &lt;span style="color:#666"&gt;&amp;amp;&amp;amp;&lt;/span&gt; systemctl start kubelet
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;上面的命令，需要翻墙才能跑通，没条件的可以去&lt;a href="https://github.com/kubernetes/release"&gt;release项目&lt;/a&gt;自己编译deb包或者rpm包，如下运行&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;git clone https://github.com/kubernetes/release.git &lt;span style="color:#666"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style="color:#a2f"&gt;cd&lt;/span&gt; release
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;# debian系如下&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker build --tag&lt;span style="color:#666"&gt;=&lt;/span&gt;debian-packager debian
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker run --volume&lt;span style="color:#666"&gt;=&lt;/span&gt;&lt;span style="color:#b44"&gt;&amp;#34;&lt;/span&gt;&lt;span style="color:#a2f;font-weight:bold"&gt;$(&lt;/span&gt;&lt;span style="color:#a2f"&gt;pwd&lt;/span&gt;&lt;span style="color:#a2f;font-weight:bold"&gt;)&lt;/span&gt;&lt;span style="color:#b44"&gt;/debian:/src&amp;#34;&lt;/span&gt; debian-packager
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;# docker run -e &amp;#34;HTTPS_PROXY=127.0.0.1:8118&amp;#34; --net=host --volume=&amp;#34;$(pwd)/debian:/src&amp;#34; debian-packager&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;# 默认debs包在目录debian/bin/stable/xenial下&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;# centos系的如下&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a2f"&gt;cd&lt;/span&gt; rpm
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;./docker-build.sh
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;#默认rpm包在目录output/x86_64/下&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;必要依赖搞到手后，就可以简单的利用kubeadm启动集群了
在master节点上如下执行初始化，此过程会启动 etcd，controller-manager，scheduler，api-server组件&lt;/p&gt;</description></item></channel></rss>