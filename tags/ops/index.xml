<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Ops on 现代技能栈</title><link>https://xiaoping378.github.io/tags/ops/</link><description>Recent content in Ops on 现代技能栈</description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Thu, 27 Nov 2025 19:06:19 +0800</lastBuildDate><atom:link href="https://xiaoping378.github.io/tags/ops/index.xml" rel="self" type="application/rss+xml"/><item><title>Windows Terminal终端入坑指南</title><link>https://xiaoping378.github.io/docs/3-devops/9-windows-terminal/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://xiaoping378.github.io/docs/3-devops/9-windows-terminal/</guid><description>&lt;div class="pageinfo pageinfo-primary"&gt;
&lt;p&gt;为了这个东西，重新安装了系统，目前是在windows LTSC 2021版本下的使用指南。
在IT界Terminal和Console差不多是一个意思，同属于界面层面的，不少人老和Shell搞混了，特此说明下Shell一般是指的Bash、zsh、PowerShell、cmd等。&lt;/p&gt;

&lt;/div&gt;

&lt;h2 id="安装"&gt;安装&lt;a class="td-heading-self-link" href="#%e5%ae%89%e8%a3%85" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;为了使用Windows Terminal，在春节期间，重新安装了LTSC 2021版本的系统（之前一直用的LTSC 2019）。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;它对操作系统内部版本的最低要求为 &lt;code&gt;18362.0&lt;/code&gt;，通过&lt;code&gt;Win+R&lt;/code&gt;输入&lt;code&gt;winver&lt;/code&gt;可以确认本机系统是否支持。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;目前有三种办法安装（本人选用的第二种）:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;是在应用商店中搜索&lt;code&gt;Windows Terminal&lt;/code&gt;，安装即可。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;通过&lt;a href="https://github.com/microsoft/terminal/releases"&gt;Github release&lt;/a&gt;页面下载安装包，&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-powershell" data-lang="powershell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a2f"&gt;Add-AppxPackage&lt;/span&gt; Microsoft.WindowsTerminal_&amp;lt;versionNumber&amp;gt;.msixbundle
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;通过命令行&lt;a href="https://github.com/microsoft/winget-cli"&gt;winget&lt;/a&gt;、&lt;a href="https://chocolatey.org/"&gt;Chocolatey &lt;/a&gt;、&lt;a href="https://scoop.sh/"&gt;Scoop &lt;/a&gt;安装，下面以winget为例：&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-powershell" data-lang="powershell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;winget install --id=Microsoft.WindowsTerminal -e
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="配置"&gt;配置&lt;a class="td-heading-self-link" href="#%e9%85%8d%e7%bd%ae" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;现在基本可以图形界面配置了，按照自己的习惯图形操作即可，网上一坨坨的教程，此处不表。&lt;/p&gt;
&lt;p&gt;&lt;img src="https://xiaoping378.github.io/images/windows-terminal-2022-01-30-12-53-50.png" alt=""&gt;&lt;/p&gt;
&lt;p&gt;默认配置保存在了&lt;code&gt;%LOCALAPPDATA%\Packages\Microsoft.WindowsTerminal_8wekyb3d8bbwe\LocalState\settings.json&lt;/code&gt;&lt;/p&gt;
&lt;h2 id="技巧"&gt;技巧&lt;a class="td-heading-self-link" href="#%e6%8a%80%e5%b7%a7" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;快捷键
&lt;ul&gt;
&lt;li&gt;新建终端 -- &lt;code&gt;Ctrl+Shift+t&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;切换终端 -- &lt;code&gt;Alt + Num&lt;/code&gt; , （我这里修改过了）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Quake窗口
&lt;ul&gt;
&lt;li&gt;快捷键是&lt;strong&gt;Win + `&lt;/strong&gt; , 可以快速从屏幕上半区换出终端窗口&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="gitbash"&gt;GitBash&lt;a class="td-heading-self-link" href="#gitbash" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;img src="https://xiaoping378.github.io/images/windows-terminal-2022-01-30-23-03-08.png" alt=""&gt;&lt;/p&gt;
&lt;p&gt;本人环境&lt;code&gt;VSCode&lt;/code&gt;和&lt;a href="https://git-scm.com/download/win"&gt;git-bash&lt;/a&gt;都是绿色版本了，免去了每次重装系统，都进行各种重复的配置操作.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;没有环境的可以自行通过上面的连接下载GitBash，后面有时间会尝试下&lt;code&gt;WSL&lt;/code&gt;和WSL2。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="中文乱码"&gt;中文乱码&lt;a class="td-heading-self-link" href="#%e4%b8%ad%e6%96%87%e4%b9%b1%e7%a0%81" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;需要添加环境变量到&lt;code&gt;~/.bashrc&lt;/code&gt;或者&lt;code&gt;~/.zshrc&lt;/code&gt;中。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a2f"&gt;export&lt;/span&gt; &lt;span style="color:#b8860b"&gt;LANG&lt;/span&gt;&lt;span style="color:#666"&gt;=&lt;/span&gt;zh_CN.UTF-8
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="绿色改造"&gt;绿色改造&lt;a class="td-heading-self-link" href="#%e7%bb%bf%e8%89%b2%e6%94%b9%e9%80%a0" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;绿色改造的核心，一个是安装时不默认安装在C盘，另一个就是设置&lt;code&gt;HOME&lt;/code&gt;的系统环境变量，Git-Bash每次启动是可以根据&lt;code&gt;HOME&lt;/code&gt;变量，决定加载配置的路径的。&lt;/p&gt;</description></item><item><title>TiDB初体验</title><link>https://xiaoping378.github.io/docs/3-devops/tidb/tidb-%E5%88%9D%E4%BD%93%E9%AA%8C/</link><pubDate>Thu, 03 Feb 2022 00:00:00 +0000</pubDate><guid>https://xiaoping378.github.io/docs/3-devops/tidb/tidb-%E5%88%9D%E4%BD%93%E9%AA%8C/</guid><description>&lt;h2 id="安装"&gt;安装&lt;a class="td-heading-self-link" href="#%e5%ae%89%e8%a3%85" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;安装环境要求：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Mac或者单机Linux环境&lt;/li&gt;
&lt;li&gt;可以连接外网&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;执行命令安装&lt;code&gt;TiUP&lt;/code&gt;工具，官方运维管理工具。&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl --proto &lt;span style="color:#b44"&gt;&amp;#39;=https&amp;#39;&lt;/span&gt; --tlsv1.2 -sSf https://tiup-mirrors.pingcap.com/install.sh | sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;命令会有关键信息输出:添加了证书、修改了PATH变量等，需要声明下环境变量，以使&lt;code&gt;tiup&lt;/code&gt;命令能被找到。&lt;/p&gt;
&lt;ol start="2"&gt;
&lt;li&gt;声明系统环境变量&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#080;font-style:italic"&gt;# 因个人环境，此处会有差异&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a2f"&gt;source&lt;/span&gt; ~/.zshrc
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;可以&lt;code&gt;echo $PATH&lt;/code&gt;下，看到&lt;code&gt;/root/.tiup/bin&lt;/code&gt;被加到了最前面。&lt;/p&gt;
&lt;ol start="3"&gt;
&lt;li&gt;启动单实例集群&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;直接执行&lt;code&gt;tiup playground&lt;/code&gt;命令默认会运行最新版本的TiDB集群，其中TiDB Server、TiKV、PD 和 TiFlash 实例各 1 个：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tiup playground
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;具体如下图所示，需要另开一个终端，使用mysql发起连接：
&lt;img src="https://xiaoping378.github.io/images/github-dev-2022-02-04-16-16-18.png" alt=""&gt;&lt;/p&gt;
&lt;p&gt;目前tidb playground默认启动监听在127的地址，可以通过--host参数更改，但还不能更改端口（经查代码是写死了端口）。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;其他可修改参数，可通过&lt;code&gt;tiup playground -h&lt;/code&gt;查看。&lt;/li&gt;
&lt;li&gt;dashboard的默认root用户没有密码，如果是公网暴露了，建议如下添加密码(我这里设置了root密码为&lt;code&gt;tidb&lt;/code&gt;):&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mysql -h127.0.0.1 -P4000 -uroot
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;alter user &lt;span style="color:#b44"&gt;&amp;#39;root&amp;#39;&lt;/span&gt; identified by &lt;span style="color:#b44"&gt;&amp;#39;tidb&amp;#39;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;grafana的登录密码，默认为admin/admin&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tiup update --self&lt;/code&gt;可升级tiup命令&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;mysql客户端可通过&lt;code&gt;yum install -y mysql&lt;/code&gt;或者&lt;code&gt;apt install mysql-client&lt;/code&gt;安装。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="集群"&gt;集群&lt;a class="td-heading-self-link" href="#%e9%9b%86%e7%be%a4" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;没有多节点的环境，折腾了一下，要单机玩这个模式的话，需要hack的东西太多，，，目前还不建议这么搞，等有时间看能不能提个PR.&lt;/p&gt;
&lt;h2 id="tidb-server"&gt;TIDB Server&lt;a class="td-heading-self-link" href="#tidb-server" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;处理client的SQL请求.&lt;/p&gt;
&lt;h2 id="pd"&gt;PD&lt;a class="td-heading-self-link" href="#pd" aria-label="Heading self-link"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;提供全局时钟和Region调度和管理（扩缩容）。&lt;/p&gt;</description></item></channel></rss>